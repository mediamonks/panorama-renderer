!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=21)}([function(t,e,n){t.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(38);e.default=r.default},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(5),i=n(61),a=n(60),o=Object.defineProperty;e.f=n(0)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"copy",function(){return o}),n.d(e,"fromValues",function(){return u}),n.d(e,"set",function(){return s}),n.d(e,"identity",function(){return c}),n.d(e,"transpose",function(){return f}),n.d(e,"invert",function(){return h}),n.d(e,"adjoint",function(){return l}),n.d(e,"determinant",function(){return d}),n.d(e,"multiply",function(){return m}),n.d(e,"translate",function(){return v}),n.d(e,"scale",function(){return g}),n.d(e,"rotate",function(){return b}),n.d(e,"rotateX",function(){return p}),n.d(e,"rotateY",function(){return M}),n.d(e,"rotateZ",function(){return y}),n.d(e,"fromTranslation",function(){return w}),n.d(e,"fromScaling",function(){return x}),n.d(e,"fromRotation",function(){return E}),n.d(e,"fromXRotation",function(){return P}),n.d(e,"fromYRotation",function(){return R}),n.d(e,"fromZRotation",function(){return T}),n.d(e,"fromRotationTranslation",function(){return L}),n.d(e,"fromQuat2",function(){return A}),n.d(e,"getTranslation",function(){return I}),n.d(e,"getScaling",function(){return S}),n.d(e,"getRotation",function(){return O}),n.d(e,"fromRotationTranslationScale",function(){return _}),n.d(e,"fromRotationTranslationScaleOrigin",function(){return j}),n.d(e,"fromQuat",function(){return B}),n.d(e,"frustum",function(){return F}),n.d(e,"perspective",function(){return U}),n.d(e,"perspectiveFromFieldOfView",function(){return D}),n.d(e,"ortho",function(){return C}),n.d(e,"lookAt",function(){return q}),n.d(e,"targetTo",function(){return V}),n.d(e,"str",function(){return z}),n.d(e,"frob",function(){return X}),n.d(e,"add",function(){return N}),n.d(e,"subtract",function(){return Y}),n.d(e,"multiplyScalar",function(){return G}),n.d(e,"multiplyScalarAndAdd",function(){return k}),n.d(e,"exactEquals",function(){return W}),n.d(e,"equals",function(){return H}),n.d(e,"mul",function(){return Q}),n.d(e,"sub",function(){return Z});var r=n(null);function i(){var t=new r.a(16);return r.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){var e=new r.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,n,i,a,o,u,s,c,f,h,l,d,m,v,g){var b=new r.a(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=i,b[4]=a,b[5]=o,b[6]=u,b[7]=s,b[8]=c,b[9]=f,b[10]=h,b[11]=l,b[12]=d,b[13]=m,b[14]=v,b[15]=g,b}function s(t,e,n,r,i,a,o,u,s,c,f,h,l,d,m,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=v,t[15]=g,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15],p=n*u-r*o,M=n*s-i*o,y=n*c-a*o,w=r*s-i*u,x=r*c-a*u,E=i*c-a*s,P=f*v-h*m,R=f*g-l*m,T=f*b-d*m,L=h*g-l*v,A=h*b-d*v,I=l*b-d*g,S=p*I-M*A+y*L+w*T-x*R+E*P;return S?(S=1/S,t[0]=(u*I-s*A+c*L)*S,t[1]=(i*A-r*I-a*L)*S,t[2]=(v*E-g*x+b*w)*S,t[3]=(l*x-h*E-d*w)*S,t[4]=(s*T-o*I-c*R)*S,t[5]=(n*I-i*T+a*R)*S,t[6]=(g*y-m*E-b*M)*S,t[7]=(f*E-l*y+d*M)*S,t[8]=(o*A-u*T+c*P)*S,t[9]=(r*T-n*A-a*P)*S,t[10]=(m*x-v*y+b*p)*S,t[11]=(h*y-f*x-d*p)*S,t[12]=(u*R-o*L-s*P)*S,t[13]=(n*L-r*R+i*P)*S,t[14]=(v*M-m*w-g*p)*S,t[15]=(f*w-h*M+l*p)*S,t):null}function l(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15];return t[0]=u*(l*b-d*g)-h*(s*b-c*g)+v*(s*d-c*l),t[1]=-(r*(l*b-d*g)-h*(i*b-a*g)+v*(i*d-a*l)),t[2]=r*(s*b-c*g)-u*(i*b-a*g)+v*(i*c-a*s),t[3]=-(r*(s*d-c*l)-u*(i*d-a*l)+h*(i*c-a*s)),t[4]=-(o*(l*b-d*g)-f*(s*b-c*g)+m*(s*d-c*l)),t[5]=n*(l*b-d*g)-f*(i*b-a*g)+m*(i*d-a*l),t[6]=-(n*(s*b-c*g)-o*(i*b-a*g)+m*(i*c-a*s)),t[7]=n*(s*d-c*l)-o*(i*d-a*l)+f*(i*c-a*s),t[8]=o*(h*b-d*v)-f*(u*b-c*v)+m*(u*d-c*h),t[9]=-(n*(h*b-d*v)-f*(r*b-a*v)+m*(r*d-a*h)),t[10]=n*(u*b-c*v)-o*(r*b-a*v)+m*(r*c-a*u),t[11]=-(n*(u*d-c*h)-o*(r*d-a*h)+f*(r*c-a*u)),t[12]=-(o*(h*g-l*v)-f*(u*g-s*v)+m*(u*l-s*h)),t[13]=n*(h*g-l*v)-f*(r*g-i*v)+m*(r*l-i*h),t[14]=-(n*(u*g-s*v)-o*(r*g-i*v)+m*(r*s-i*u)),t[15]=n*(u*l-s*h)-o*(r*l-i*h)+f*(r*s-i*u),t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],v=t[14],g=t[15];return(e*o-n*a)*(h*g-l*v)-(e*u-r*a)*(f*g-l*m)+(e*s-i*a)*(f*v-h*m)+(n*u-r*o)*(c*g-l*d)-(n*s-i*o)*(c*v-h*d)+(r*s-i*u)*(c*m-f*d)}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],m=e[11],v=e[12],g=e[13],b=e[14],p=e[15],M=n[0],y=n[1],w=n[2],x=n[3];return t[0]=M*r+y*u+w*h+x*v,t[1]=M*i+y*s+w*l+x*g,t[2]=M*a+y*c+w*d+x*b,t[3]=M*o+y*f+w*m+x*p,M=n[4],y=n[5],w=n[6],x=n[7],t[4]=M*r+y*u+w*h+x*v,t[5]=M*i+y*s+w*l+x*g,t[6]=M*a+y*c+w*d+x*b,t[7]=M*o+y*f+w*m+x*p,M=n[8],y=n[9],w=n[10],x=n[11],t[8]=M*r+y*u+w*h+x*v,t[9]=M*i+y*s+w*l+x*g,t[10]=M*a+y*c+w*d+x*b,t[11]=M*o+y*f+w*m+x*p,M=n[12],y=n[13],w=n[14],x=n[15],t[12]=M*r+y*u+w*h+x*v,t[13]=M*i+y*s+w*l+x*g,t[14]=M*a+y*c+w*d+x*b,t[15]=M*o+y*f+w*m+x*p,t}function v(t,e,n){var r,i,a,o,u,s,c,f,h,l,d,m,v=n[0],g=n[1],b=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*b+e[12],t[13]=e[1]*v+e[5]*g+e[9]*b+e[13],t[14]=e[2]*v+e[6]*g+e[10]*b+e[14],t[15]=e[3]*v+e[7]*g+e[11]*b+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],m=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=r*v+u*g+h*b+e[12],t[13]=i*v+s*g+l*b+e[13],t[14]=a*v+c*g+d*b+e[14],t[15]=o*v+f*g+m*b+e[15]),t}function g(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(t,e,n,i){var a,o,u,s,c,f,h,l,d,m,v,g,b,p,M,y,w,x,E,P,R,T,L,A,I=i[0],S=i[1],O=i[2],_=Math.hypot(I,S,O);return _<r.b?null:(I*=_=1/_,S*=_,O*=_,a=Math.sin(n),u=1-(o=Math.cos(n)),s=e[0],c=e[1],f=e[2],h=e[3],l=e[4],d=e[5],m=e[6],v=e[7],g=e[8],b=e[9],p=e[10],M=e[11],y=I*I*u+o,w=S*I*u+O*a,x=O*I*u-S*a,E=I*S*u-O*a,P=S*S*u+o,R=O*S*u+I*a,T=I*O*u+S*a,L=S*O*u-I*a,A=O*O*u+o,t[0]=s*y+l*w+g*x,t[1]=c*y+d*w+b*x,t[2]=f*y+m*w+p*x,t[3]=h*y+v*w+M*x,t[4]=s*E+l*P+g*R,t[5]=c*E+d*P+b*R,t[6]=f*E+m*P+p*R,t[7]=h*E+v*P+M*R,t[8]=s*T+l*L+g*A,t[9]=c*T+d*L+b*A,t[10]=f*T+m*L+p*A,t[11]=h*T+v*L+M*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function p(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],u=e[6],s=e[7],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+f*r,t[6]=u*i+h*r,t[7]=s*i+l*r,t[8]=c*i-a*r,t[9]=f*i-o*r,t[10]=h*i-u*r,t[11]=l*i-s*r,t}function M(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],u=e[2],s=e[3],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-f*r,t[2]=u*i-h*r,t[3]=s*i-l*r,t[8]=a*r+c*i,t[9]=o*r+f*i,t[10]=u*r+h*i,t[11]=s*r+l*i,t}function y(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],u=e[2],s=e[3],c=e[4],f=e[5],h=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+f*r,t[2]=u*i+h*r,t[3]=s*i+l*r,t[4]=c*i-a*r,t[5]=f*i-o*r,t[6]=h*i-u*r,t[7]=l*i-s*r,t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var i,a,o,u=n[0],s=n[1],c=n[2],f=Math.hypot(u,s,c);return f<r.b?null:(u*=f=1/f,s*=f,c*=f,i=Math.sin(e),o=1-(a=Math.cos(e)),t[0]=u*u*o+a,t[1]=s*u*o+c*i,t[2]=c*u*o-s*i,t[3]=0,t[4]=u*s*o-c*i,t[5]=s*s*o+a,t[6]=c*s*o+u*i,t[7]=0,t[8]=u*c*o+s*i,t[9]=s*c*o-u*i,t[10]=c*c*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function P(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function L(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=r+r,s=i+i,c=a+a,f=r*u,h=r*s,l=r*c,d=i*s,m=i*c,v=a*c,g=o*u,b=o*s,p=o*c;return t[0]=1-(d+v),t[1]=h+p,t[2]=l-b,t[3]=0,t[4]=h-p,t[5]=1-(f+v),t[6]=m+g,t[7]=0,t[8]=l+b,t[9]=m-g,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function A(t,e){var n=new r.a(3),i=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=i*i+a*a+o*o+u*u;return l>0?(n[0]=2*(s*u+h*i+c*o-f*a)/l,n[1]=2*(c*u+h*a+f*i-s*o)/l,n[2]=2*(f*u+h*o+s*a-c*i)/l):(n[0]=2*(s*u+h*i+c*o-f*a),n[1]=2*(c*u+h*a+f*i-s*o),n[2]=2*(f*u+h*o+s*a-c*i)),L(t,e,n),t}function I(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function S(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,u),t[2]=Math.hypot(s,c,f),t}function O(t,e){var n=new r.a(3);S(n,e);var i=1/n[0],a=1/n[1],o=1/n[2],u=e[0]*i,s=e[1]*a,c=e[2]*o,f=e[4]*i,h=e[5]*a,l=e[6]*o,d=e[8]*i,m=e[9]*a,v=e[10]*o,g=u+h+v,b=0;return g>0?(b=2*Math.sqrt(g+1),t[3]=.25*b,t[0]=(l-m)/b,t[1]=(d-c)/b,t[2]=(s-f)/b):u>h&&u>v?(b=2*Math.sqrt(1+u-h-v),t[3]=(l-m)/b,t[0]=.25*b,t[1]=(s+f)/b,t[2]=(d+c)/b):h>v?(b=2*Math.sqrt(1+h-u-v),t[3]=(d-c)/b,t[0]=(s+f)/b,t[1]=.25*b,t[2]=(l+m)/b):(b=2*Math.sqrt(1+v-u-h),t[3]=(s-f)/b,t[0]=(d+c)/b,t[1]=(l+m)/b,t[2]=.25*b),t}function _(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=e[3],s=i+i,c=a+a,f=o+o,h=i*s,l=i*c,d=i*f,m=a*c,v=a*f,g=o*f,b=u*s,p=u*c,M=u*f,y=r[0],w=r[1],x=r[2];return t[0]=(1-(m+g))*y,t[1]=(l+M)*y,t[2]=(d-p)*y,t[3]=0,t[4]=(l-M)*w,t[5]=(1-(h+g))*w,t[6]=(v+b)*w,t[7]=0,t[8]=(d+p)*x,t[9]=(v-b)*x,t[10]=(1-(h+m))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function j(t,e,n,r,i){var a=e[0],o=e[1],u=e[2],s=e[3],c=a+a,f=o+o,h=u+u,l=a*c,d=a*f,m=a*h,v=o*f,g=o*h,b=u*h,p=s*c,M=s*f,y=s*h,w=r[0],x=r[1],E=r[2],P=i[0],R=i[1],T=i[2],L=(1-(v+b))*w,A=(d+y)*w,I=(m-M)*w,S=(d-y)*x,O=(1-(l+b))*x,_=(g+p)*x,j=(m+M)*E,B=(g-p)*E,F=(1-(l+v))*E;return t[0]=L,t[1]=A,t[2]=I,t[3]=0,t[4]=S,t[5]=O,t[6]=_,t[7]=0,t[8]=j,t[9]=B,t[10]=F,t[11]=0,t[12]=n[0]+P-(L*P+S*R+j*T),t[13]=n[1]+R-(A*P+O*R+B*T),t[14]=n[2]+T-(I*P+_*R+F*T),t[15]=1,t}function B(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,u=r+r,s=i+i,c=n*o,f=r*o,h=r*u,l=i*o,d=i*u,m=i*s,v=a*o,g=a*u,b=a*s;return t[0]=1-h-m,t[1]=f+b,t[2]=l-g,t[3]=0,t[4]=f-b,t[5]=1-c-m,t[6]=d+v,t[7]=0,t[8]=l+g,t[9]=d-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function F(t,e,n,r,i,a,o){var u=1/(n-e),s=1/(i-r),c=1/(a-o);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*s,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function U(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}function D(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(i+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function C(t,e,n,r,i,a,o){var u=1/(e-n),s=1/(r-i),c=1/(a-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(o+a)*c,t[15]=1,t}function q(t,e,n,i){var a,o,u,s,f,h,l,d,m,v,g=e[0],b=e[1],p=e[2],M=i[0],y=i[1],w=i[2],x=n[0],E=n[1],P=n[2];return Math.abs(g-x)<r.b&&Math.abs(b-E)<r.b&&Math.abs(p-P)<r.b?c(t):(l=g-x,d=b-E,m=p-P,a=y*(m*=v=1/Math.hypot(l,d,m))-w*(d*=v),o=w*(l*=v)-M*m,u=M*d-y*l,(v=Math.hypot(a,o,u))?(a*=v=1/v,o*=v,u*=v):(a=0,o=0,u=0),s=d*u-m*o,f=m*a-l*u,h=l*o-d*a,(v=Math.hypot(s,f,h))?(s*=v=1/v,f*=v,h*=v):(s=0,f=0,h=0),t[0]=a,t[1]=s,t[2]=l,t[3]=0,t[4]=o,t[5]=f,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=m,t[11]=0,t[12]=-(a*g+o*b+u*p),t[13]=-(s*g+f*b+h*p),t[14]=-(l*g+d*b+m*p),t[15]=1,t)}function V(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=r[0],s=r[1],c=r[2],f=i-n[0],h=a-n[1],l=o-n[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var m=s*l-c*h,v=c*f-u*l,g=u*h-s*f;return(d=m*m+v*v+g*g)>0&&(m*=d=1/Math.sqrt(d),v*=d,g*=d),t[0]=m,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-l*v,t[5]=l*m-f*g,t[6]=f*v-h*m,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function X(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function N(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Y(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function G(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function k(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function W(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function H(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=t[8],l=t[9],d=t[10],m=t[11],v=t[12],g=t[13],b=t[14],p=t[15],M=e[0],y=e[1],w=e[2],x=e[3],E=e[4],P=e[5],R=e[6],T=e[7],L=e[8],A=e[9],I=e[10],S=e[11],O=e[12],_=e[13],j=e[14],B=e[15];return Math.abs(n-M)<=r.b*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(i-y)<=r.b*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(a-w)<=r.b*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-x)<=r.b*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(u-E)<=r.b*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-P)<=r.b*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-R)<=r.b*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(f-T)<=r.b*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-L)<=r.b*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(l-A)<=r.b*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-I)<=r.b*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(m-S)<=r.b*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(v-O)<=r.b*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(g-_)<=r.b*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(b-j)<=r.b*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(p-B)<=r.b*Math.max(1,Math.abs(p),Math.abs(B))}var Q=m,Z=Y},function(t,e,n){"use strict";var r=n(8);e.__esModule=!0,e.PanoramaRenderer=e.ImageEffectRenderer=void 0;var i=r(n(19));e.ImageEffectRenderer=i.default;var a=r(n(58));e.PanoramaRenderer=a.default},function(t,e,n){"use strict";var r=n(3);e.__esModule=!0,e.default=e.ImageEffectRendererBuffer=e.ImageEffectRendererFrameBuffer=void 0;var i=r(n(33)),a=function(){function t(t,e){void 0===e&&(e=WebGLRenderingContext.UNSIGNED_BYTE),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"format",{configurable:!0,enumerable:!0,writable:!0,value:WebGLRenderingContext.RGBA}),Object.defineProperty(this,"type",{configurable:!0,enumerable:!0,writable:!0,value:WebGLRenderingContext.UNSIGNED_BYTE}),Object.defineProperty(this,"texture",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),this.gl=t,this.type=e,this.texture=this.gl.createTexture(),this.resize(16,16),this.frameBuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frameBuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0)}var e=t.prototype;return e.getTexture=function(){return this.texture},e.getFrameBuffer=function(){return this.frameBuffer},e.resize=function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,null))},e.destruct=function(){this.frameBuffer&&this.gl.deleteFramebuffer(this.frameBuffer),this.texture&&this.gl.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},t}();e.ImageEffectRendererFrameBuffer=a;var o=function(){function t(t,e){void 0===e&&(e=-1),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"frame",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"textures",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(this,"program",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shader",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posAttributeIndex",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uvAttributeIndex",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformGlobalTime",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformTime",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformFrame",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformResolution",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer0",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer1",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),this.gl=t,e>=0&&(this.frameBuffer0=new a(t,e),this.frameBuffer1=new a(t,e))}var e=t.prototype;return e.addImage=function(e,n,r,i,a,o){if(void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===o&&(o=!1),n>=4)throw new Error("ImageEffectRenderer: A maximum of 4 slots is available, slotIndex is out of bounds.");if(this.textures[n])throw new Error("ImageEffectRenderer: Image already added to slot "+n+". Use updateImage if you want to update an existing slot.");this.textures[n]=e instanceof t?e:this.gl.createTexture(),this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"iChannel"+n),n),this.updateImage(e,n,r,i,a,o)},e.updateImage=function(e,n,r,i,a,o){void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===o&&(o=!1),e instanceof t?(this.updateTexture(e,e.getSrc().getTexture(),n,r,i,o),this.updateTexture(e,e.getDest().getTexture(),n,r,i,o)):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[n]),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,a?1:0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.updateTexture(e,this.textures[n],n,r,i,o))},e.updateTexture=function(t,e,n,r,i,a){void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform2f(this.gl.getUniformLocation(this.program,"iChannelResolution"+n),t.width,t.height),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,r?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)},e.setUniformFloat=function(t,e){this.gl.useProgram(this.program),this.gl.uniform1f(this.gl.getUniformLocation(this.program,t),e)},e.setUniformInt=function(t,e){this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),e)},e.setUniformVec2=function(t,e,n){this.gl.useProgram(this.program),this.gl.uniform2f(this.gl.getUniformLocation(this.program,t),e,n)},e.setUniformVec3=function(t,e,n,r){this.gl.useProgram(this.program),this.gl.uniform3f(this.gl.getUniformLocation(this.program,t),e,n,r)},e.setUniformVec4=function(t,e,n,r,i){this.gl.useProgram(this.program),this.gl.uniform4f(this.gl.getUniformLocation(this.program,t),e,n,r,i)},e.setUniformMatrix=function(t,e){this.gl.useProgram(this.program),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,t),!1,e)},e.compileShader=function(t){if(this.shader!==t){this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.shader=t,this.program=this.gl.createProgram();var e=this.gl.createShader(this.gl.VERTEX_SHADER),n=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"\n            attribute vec2 aPos;\n            attribute vec2 aUV;\n            \n            varying vec2 vUV0;\n            \n            void main(void) {\n                vUV0 = aUV;\n                gl_Position = vec4(aPos, 0.0, 1.0);\n            }\n        "),this.gl.compileShader(e);var r=this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS);if(!r)throw new Error("ImageEffectRenderer: Vertex shader compilation failed: "+this.gl.getShaderInfoLog(e));if(this.gl.shaderSource(n,"\n            #ifdef GL_ES\n                precision highp float;\n            #endif\n            \n            varying vec2 vUV0;\n            \n            uniform vec2 iResolution;\n            uniform float iTime;\n            uniform float iGlobalTime;\n            uniform int iFrame;\n            uniform vec4 iMouse;\n            \n            uniform highp sampler2D iChannel0;\n            uniform highp sampler2D iChannel1;\n            uniform highp sampler2D iChannel2;\n            uniform highp sampler2D iChannel3;\n            \n            uniform vec2 iChannelResolution0;\n            uniform vec2 iChannelResolution1;\n            uniform vec2 iChannelResolution2;\n            uniform vec2 iChannelResolution3;\n            \n            void mainImage(out vec4, vec2);\n            \n            vec4 texture(sampler2D tex, vec2 uv) {\n                return texture2D(tex, uv);\n            }\n            \n            void main(void) {\n            \tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n                mainImage(gl_FragColor, gl_FragCoord.xy);\n            }\n        "+t),this.gl.compileShader(n),!(r=this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)))throw new Error("ImageEffectRenderer: Shader compilation failed: "+this.gl.getShaderInfoLog(n));if(this.gl.attachShader(this.program,e),this.gl.attachShader(this.program,n),this.gl.linkProgram(this.program),!(r=this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)))throw new Error("ImageEffectRenderer: Program linking failed: "+this.gl.getProgramInfoLog(this.program));this.posAttributeIndex=this.gl.getAttribLocation(this.program,"aPos"),this.uvAttributeIndex=this.gl.getAttribLocation(this.program,"aUV"),this.gl.useProgram(this.program),this.uniformGlobalTime=this.gl.getUniformLocation(this.program,"iGlobalTime"),this.uniformTime=this.gl.getUniformLocation(this.program,"iTime"),this.uniformResolution=this.gl.getUniformLocation(this.program,"iResolution"),this.uniformFrame=this.gl.getUniformLocation(this.program,"iFrame")}},e.getSrc=function(){return this.frame%2==0?this.frameBuffer0:this.frameBuffer1},e.getDest=function(){return this.frame%2==1?this.frameBuffer0:this.frameBuffer1},e.draw=function(e,n,r,i){void 0===n&&(n=0),this.width=0|r,this.height=0|i;var a=this.getDest();a&&(a.resize(this.width,this.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.getFrameBuffer())),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.uniform1f(this.uniformGlobalTime,n),this.gl.uniform1f(this.uniformTime,n),this.gl.uniform1i(this.uniformFrame,this.frame),this.gl.uniform2f(this.uniformResolution,r,i);for(var o=0;o<this.textures.length;++o)this.gl.activeTexture(this.gl.TEXTURE0+o),this.textures[o]instanceof t?this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o].getSrc().getTexture()):this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(this.posAttributeIndex),this.gl.vertexAttribPointer(this.posAttributeIndex,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(this.uvAttributeIndex),this.gl.vertexAttribPointer(this.uvAttributeIndex,2,this.gl.FLOAT,!1,16,8),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),a&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.frame++},e.getShaderSource=function(){return this.shader},e.destruct=function(){for(var e in this.textures)this.textures[e]instanceof t||this.gl.deleteTexture(this.textures[e]);this.textures=[],this.frameBuffer0&&(this.frameBuffer0.destruct(),this.frameBuffer0=null),this.frameBuffer1&&(this.frameBuffer1.destruct(),this.frameBuffer1=null)},t}();e.ImageEffectRendererBuffer=o;var u=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),Object.defineProperty(this,"canvas",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"quadVBO",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestAnimationID",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationLoop",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canvasScale",{configurable:!0,enumerable:!0,writable:!0,value:1}),Object.defineProperty(this,"mainBuffer",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"buffers",{configurable:!0,enumerable:!0,writable:!0,value:[]}),!n)throw new Error("Use ImageEffectRenderer.createTemporary to create a ImageEffectRenderer");if(this.container=t,this.animationLoop=e,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",{premultipliedAlpha:!0}),!this.gl)throw new Error("ImageEffectRenderer: Failed to request a 3D context, aborting...")}t.createTemporary=function(e,n,r,i){var a;if(void 0===r&&(r=!1),void 0===i&&(i=1),t.IERActive.length>=t.MAX_IMAGE_EFFECT_RENDERERS)throw new Error("Maximum number of ImageEffectRenderer's reached, no new ImageEffectRenderer created");if(t.IERPool.length>0){for(var u=!1,s=0;s<t.IERPool.length;s++)t.IERPool[s].mainBuffer.getShaderSource()===n&&(a=t.IERPool[s],t.IERPool.splice(s,1),u=!0);u||(a=t.IERPool[0],t.IERPool.splice(0,1))}else a=new t(e,r,!0);return a.animationLoop=r,a.container=e,a.canvasScale=i,e.appendChild(a.canvas),a.updateSize(),a.quadVBO||a.generateNDCQuad(),a.mainBuffer||(a.mainBuffer=new o(a.gl)),a.mainBuffer.compileShader(n),a.gl.clearColor(0,0,0,0),a.gl.viewport(0,0,a.canvas.width,a.canvas.height),a.gl.clear(a.gl.COLOR_BUFFER_BIT),a.gl.enable(a.gl.BLEND),a.gl.blendFunc(a.gl.ONE,a.gl.ONE_MINUS_SRC_ALPHA),a.width=a.canvas.width,a.height=a.canvas.height,t.IERActive.push(a),a};var e=t.prototype;return e.getCanvas=function(){return this.canvas},e.play=function(){this.requestAnimationID||(this.animationLoop=!0,this.draw(0))},e.stop=function(){this.requestAnimationID&&(window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=0,this.animationLoop=!1)},e.addBuffer=function(t,e,n){return void 0===n&&(n=WebGLRenderingContext.UNSIGNED_BYTE),this.buffers[t]&&this.buffers[t].destruct(),this.buffers[t]=new o(this.gl,n),this.buffers[t].compileShader(e),this.buffers[t]},e.getBuffer=function(t){return this.buffers[t]},e.getMainBuffer=function(){return this.mainBuffer},e.updateSize=function(){this.canvas.width=this.container.offsetWidth*this.canvasScale,this.canvas.height=this.container.offsetHeight*this.canvasScale,this.canvas.style.width=this.container.offsetWidth+"px",this.canvas.style.height=this.container.offsetHeight+"px"},e.generateNDCQuad=function(){var t=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]);this.quadVBO=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)},e.draw=function(t){var e=this;for(var n in void 0===t&&(t=0),this.time=t/1e3,this.canvas.width===this.width&&this.canvas.height===this.height||(this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.width=this.canvas.width,this.height=this.canvas.height),this.buffers)this.buffers[n].draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height);this.mainBuffer.draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height),this.animationLoop&&(this.requestAnimationID=window.requestAnimationFrame(function(t){return e.draw(t)}))},e.addImage=function(t,e,n,r,i,a){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===a&&(a=!1),this.mainBuffer.addImage(t,e,n,r,i,a)},e.updateImage=function(t,e,n,r,i,a){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===a&&(a=!1),this.mainBuffer.updateImage(t,e,n,r,i,a)},e.setUniformFloat=function(t,e){this.mainBuffer.setUniformFloat(t,e)},e.setUniformInt=function(t,e){this.mainBuffer.setUniformInt(t,e)},e.setUniformVec2=function(t,e,n){this.mainBuffer.setUniformVec2(t,e,n)},e.setUniformVec3=function(t,e,n,r){this.mainBuffer.setUniformVec3(t,e,n,r)},e.setUniformVec4=function(t,e,n,r,i){this.mainBuffer.setUniformVec4(t,e,n,r,i)},e.setUniformMatrix=function(t,e){this.mainBuffer.setUniformMatrix(t,e)},e.destruct=function(){for(var t in this.buffers)this.buffers[t].destruct();this.buffers=[],this.mainBuffer.destruct()},t.releaseTemporary=function(e){e.stop(),e.destruct(),e.canvas.parentNode.removeChild(e.canvas);var n=t.IERActive.indexOf(e);if(!(n>-1))throw new Error("Can't find the EffectRenderer in the active pool");t.IERActive.splice(n,1),t.IERPool.push(e)},(0,i.default)(t,[{key:"renderTime",get:function(){return this.time}}]),t}();e.default=u,Object.defineProperty(u,"MAX_IMAGE_EFFECT_RENDERERS",{configurable:!0,enumerable:!0,writable:!0,value:10}),Object.defineProperty(u,"IERActive",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(u,"IERPool",{configurable:!0,enumerable:!0,writable:!0,value:[]})},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(42)("keys"),i=n(41);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(48),i=n(46);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(4),i=n(2).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(2),i=n(7),a=n(64),o=n(62),u=function(t,e,n){var s,c,f,h=t&u.F,l=t&u.G,d=t&u.S,m=t&u.P,v=t&u.B,g=t&u.W,b=l?i:i[e]||(i[e]={}),p=b.prototype,M=l?r:d?r[e]:(r[e]||{}).prototype;for(s in l&&(n=e),n)(c=!h&&M&&void 0!==M[s])&&s in b||(f=c?M[s]:n[s],b[s]=l&&"function"!=typeof M[s]?n[s]:v&&c?a(f,r):g&&M[s]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):m&&"function"==typeof f?a(Function.call,f):f,m&&((b.virtual||(b.virtual={}))[s]=f,t&u.R&&p&&!p[s]&&o(p,s,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,n){"use strict";var r=n(8);e.__esModule=!0,e.default=e.ImageEffectRendererBuffer=e.ImageEffectRendererFrameBuffer=void 0;var i=r(n(68)),a=function(){function t(t,e){void 0===e&&(e=WebGLRenderingContext.UNSIGNED_BYTE),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"format",{configurable:!0,enumerable:!0,writable:!0,value:WebGLRenderingContext.RGBA}),Object.defineProperty(this,"type",{configurable:!0,enumerable:!0,writable:!0,value:WebGLRenderingContext.UNSIGNED_BYTE}),Object.defineProperty(this,"texture",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),this.gl=t,this.type=e,this.texture=this.gl.createTexture(),this.resize(16,16),this.frameBuffer=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frameBuffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0)}var e=t.prototype;return e.getTexture=function(){return this.texture},e.getFrameBuffer=function(){return this.frameBuffer},e.resize=function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.format,this.width,this.height,0,this.format,this.type,null))},e.destruct=function(){this.frameBuffer&&this.gl.deleteFramebuffer(this.frameBuffer),this.texture&&this.gl.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},t}();e.ImageEffectRendererFrameBuffer=a;var o=function(){function t(t,e){void 0===e&&(e=-1),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"frame",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"textures",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(this,"program",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shader",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"posAttributeIndex",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uvAttributeIndex",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformGlobalTime",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformTime",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"uniformResolution",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer0",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frameBuffer1",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),this.gl=t,e>=0&&(this.frameBuffer0=new a(t,e),this.frameBuffer1=new a(t,e))}var e=t.prototype;return e.addImage=function(e,n,r,i,a,o){if(void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===o&&(o=!1),n>=4)throw new Error("ImageEffectRenderer: A maximum of 4 slots is available, slotIndex is out of bounds.");if(this.textures[n])throw new Error("ImageEffectRenderer: Image already added to slot "+n+". Use updateImage if you want to update an existing slot.");this.textures[n]=e instanceof t?e:this.gl.createTexture(),this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,"iChannel"+n),n),this.updateImage(e,n,r,i,a,o)},e.updateImage=function(e,n,r,i,a,o){void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),void 0===o&&(o=!1),e instanceof t?(this.updateTexture(e,e.getSrc().getTexture(),n,r,i,o),this.updateTexture(e,e.getDest().getTexture(),n,r,i,o)):(this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[n]),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,a?1:0),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.updateTexture(e,this.textures[n],n,r,i,o))},e.updateTexture=function(t,e,n,r,i,a){void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===a&&(a=!1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform2f(this.gl.getUniformLocation(this.program,"iChannelResolution"+n),t.width,t.height),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,r?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,i?this.gl.CLAMP_TO_EDGE:this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),a?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)},e.setUniformFloat=function(t,e){this.gl.useProgram(this.program),this.gl.uniform1f(this.gl.getUniformLocation(this.program,t),e)},e.setUniformInt=function(t,e){this.gl.useProgram(this.program),this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),e)},e.setUniformVec2=function(t,e,n){this.gl.useProgram(this.program),this.gl.uniform2f(this.gl.getUniformLocation(this.program,t),e,n)},e.setUniformVec3=function(t,e,n,r){this.gl.useProgram(this.program),this.gl.uniform3f(this.gl.getUniformLocation(this.program,t),e,n,r)},e.setUniformVec4=function(t,e,n,r,i){this.gl.useProgram(this.program),this.gl.uniform4f(this.gl.getUniformLocation(this.program,t),e,n,r,i)},e.setUniformMatrix=function(t,e){this.gl.useProgram(this.program),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(this.program,t),!1,e)},e.compileShader=function(t){if(this.shader!==t){this.program&&(this.gl.deleteProgram(this.program),this.program=null),this.shader=t,this.program=this.gl.createProgram();var e=this.gl.createShader(this.gl.VERTEX_SHADER),n=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"\n            attribute vec2 aPos;\n            attribute vec2 aUV;\n            \n            varying vec2 vUV0;\n            \n            void main(void) {\n                vUV0 = aUV;\n                gl_Position = vec4(aPos, 0.0, 1.0);\n            }\n        "),this.gl.compileShader(e);var r=this.gl.getShaderParameter(e,this.gl.COMPILE_STATUS);if(!r)throw new Error("ImageEffectRenderer: Vertex shader compilation failed: "+this.gl.getShaderInfoLog(e));if(this.gl.shaderSource(n,"\n            #ifdef GL_ES\n                precision highp float;\n            #endif\n            \n            varying vec2 vUV0;\n            \n            uniform vec2 iResolution;\n            uniform float iTime;\n            uniform float iGlobalTime;\n            uniform vec4 iMouse;\n            \n            uniform highp sampler2D iChannel0;\n            uniform highp sampler2D iChannel1;\n            uniform highp sampler2D iChannel2;\n            uniform highp sampler2D iChannel3;\n            \n            uniform vec2 iChannelResolution0;\n            uniform vec2 iChannelResolution1;\n            uniform vec2 iChannelResolution2;\n            uniform vec2 iChannelResolution3;\n            \n            void mainImage(out vec4, vec2);\n            \n            vec4 texture(sampler2D tex, vec2 uv) {\n                return texture2D(tex, uv);\n            }\n            \n            void main(void) {\n            \tgl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n                mainImage(gl_FragColor, gl_FragCoord.xy);\n            }\n        "+t),this.gl.compileShader(n),!(r=this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)))throw new Error("ImageEffectRenderer: Shader compilation failed: "+this.gl.getShaderInfoLog(n));if(this.gl.attachShader(this.program,e),this.gl.attachShader(this.program,n),this.gl.linkProgram(this.program),!(r=this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)))throw new Error("ImageEffectRenderer: Program linking failed: "+this.gl.getProgramInfoLog(this.program));this.posAttributeIndex=this.gl.getAttribLocation(this.program,"aPos"),this.uvAttributeIndex=this.gl.getAttribLocation(this.program,"aUV"),this.gl.useProgram(this.program),this.uniformGlobalTime=this.gl.getUniformLocation(this.program,"iGlobalTime"),this.uniformTime=this.gl.getUniformLocation(this.program,"iTime"),this.uniformResolution=this.gl.getUniformLocation(this.program,"iResolution")}},e.getSrc=function(){return this.frame%2==0?this.frameBuffer0:this.frameBuffer1},e.getDest=function(){return this.frame%2==1?this.frameBuffer0:this.frameBuffer1},e.draw=function(e,n,r,i){void 0===n&&(n=0),this.width=0|r,this.height=0|i;var a=this.getDest();a&&(a.resize(this.width,this.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,a.getFrameBuffer())),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.useProgram(this.program),this.gl.uniform1f(this.uniformGlobalTime,n),this.gl.uniform1f(this.uniformTime,n),this.gl.uniform2f(this.uniformResolution,r,i);for(var o=0;o<this.textures.length;++o)this.gl.activeTexture(this.gl.TEXTURE0+o),this.textures[o]instanceof t?this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o].getSrc().getTexture()):this.gl.bindTexture(this.gl.TEXTURE_2D,this.textures[o]);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(this.posAttributeIndex),this.gl.vertexAttribPointer(this.posAttributeIndex,2,this.gl.FLOAT,!1,16,0),this.gl.enableVertexAttribArray(this.uvAttributeIndex),this.gl.vertexAttribPointer(this.uvAttributeIndex,2,this.gl.FLOAT,!1,16,8),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),a&&this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.frame++},e.getShaderSource=function(){return this.shader},e.destruct=function(){for(var e in this.textures)this.textures[e]instanceof t||this.gl.deleteTexture(this.textures[e]);this.textures=[],this.frameBuffer0&&(this.frameBuffer0.destruct(),this.frameBuffer0=null),this.frameBuffer1&&(this.frameBuffer1.destruct(),this.frameBuffer1=null)},t}();e.ImageEffectRendererBuffer=o;var u=function(){function t(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=!1),Object.defineProperty(this,"canvas",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"gl",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"quadVBO",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"requestAnimationID",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationLoop",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canvasScale",{configurable:!0,enumerable:!0,writable:!0,value:1}),Object.defineProperty(this,"mainBuffer",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"buffers",{configurable:!0,enumerable:!0,writable:!0,value:[]}),!n)throw new Error("Use ImageEffectRenderer.createTemporary to create a ImageEffectRenderer");if(this.container=t,this.animationLoop=e,this.canvas=document.createElement("canvas"),this.gl=this.canvas.getContext("experimental-webgl",{premultipliedAlpha:!0}),!this.gl)throw new Error("ImageEffectRenderer: Failed to request a 3D context, aborting...")}t.createTemporary=function(e,n,r,i){var a;if(void 0===r&&(r=!1),void 0===i&&(i=1),t.IERActive.length>=t.MAX_IMAGE_EFFECT_RENDERERS)throw new Error("Maximum number of ImageEffectRenderer's reached, no new ImageEffectRenderer created");if(t.IERPool.length>0){for(var u=!1,s=0;s<t.IERPool.length;s++)t.IERPool[s].mainBuffer.getShaderSource()===n&&(a=t.IERPool[s],t.IERPool.splice(s,1),u=!0);u||(a=t.IERPool[0],t.IERPool.splice(0,1))}else a=new t(e,r,!0);return a.animationLoop=r,a.container=e,a.canvasScale=i,e.appendChild(a.canvas),a.updateSize(),a.quadVBO||a.generateNDCQuad(),a.mainBuffer||(a.mainBuffer=new o(a.gl)),a.mainBuffer.compileShader(n),a.gl.clearColor(0,0,0,0),a.gl.viewport(0,0,a.canvas.width,a.canvas.height),a.gl.clear(a.gl.COLOR_BUFFER_BIT),a.gl.enable(a.gl.BLEND),a.gl.blendFunc(a.gl.ONE,a.gl.ONE_MINUS_SRC_ALPHA),a.width=a.canvas.width,a.height=a.canvas.height,t.IERActive.push(a),a};var e=t.prototype;return e.getCanvas=function(){return this.canvas},e.play=function(){this.requestAnimationID||(this.animationLoop=!0,this.draw(0))},e.stop=function(){this.requestAnimationID&&(window.cancelAnimationFrame(this.requestAnimationID),this.requestAnimationID=0,this.animationLoop=!1)},e.addBuffer=function(t,e,n){return void 0===n&&(n=WebGLRenderingContext.UNSIGNED_BYTE),this.buffers[t]&&this.buffers[t].destruct(),this.buffers[t]=new o(this.gl,n),this.buffers[t].compileShader(e),this.buffers[t]},e.getBuffer=function(t){return this.buffers[t]},e.getMainBuffer=function(){return this.mainBuffer},e.updateSize=function(){this.canvas.width=this.container.offsetWidth*this.canvasScale,this.canvas.height=this.container.offsetHeight*this.canvasScale,this.canvas.style.width=this.container.offsetWidth+"px",this.canvas.style.height=this.container.offsetHeight+"px"},e.generateNDCQuad=function(){var t=new Float32Array([-1,1,0,1,-1,-1,0,0,1,1,1,1,1,-1,1,0]);this.quadVBO=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quadVBO),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW)},e.draw=function(t){var e=this;for(var n in void 0===t&&(t=0),this.time=t/1e3,this.canvas.width===this.width&&this.canvas.height===this.height||(this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.width=this.canvas.width,this.height=this.canvas.height),this.buffers)this.buffers[n].draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height);this.mainBuffer.draw(this.quadVBO,this.time,this.canvas.width,this.canvas.height),this.animationLoop&&(this.requestAnimationID=window.requestAnimationFrame(function(t){return e.draw(t)}))},e.addImage=function(t,e,n,r,i,a){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===a&&(a=!1),this.mainBuffer.addImage(t,e,n,r,i,a)},e.updateImage=function(t,e,n,r,i,a){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===i&&(i=!1),void 0===a&&(a=!1),this.mainBuffer.updateImage(t,e,n,r,i,a)},e.setUniformFloat=function(t,e){this.mainBuffer.setUniformFloat(t,e)},e.setUniformInt=function(t,e){this.mainBuffer.setUniformInt(t,e)},e.setUniformVec2=function(t,e,n){this.mainBuffer.setUniformVec2(t,e,n)},e.setUniformVec3=function(t,e,n,r){this.mainBuffer.setUniformVec3(t,e,n,r)},e.setUniformVec4=function(t,e,n,r,i){this.mainBuffer.setUniformVec4(t,e,n,r,i)},e.setUniformMatrix=function(t,e){this.mainBuffer.setUniformMatrix(t,e)},e.destruct=function(){for(var t in this.buffers)this.buffers[t].destruct();this.buffers=[],this.mainBuffer.destruct()},t.releaseTemporary=function(e){e.stop(),e.destruct(),e.canvas.parentNode.removeChild(e.canvas);var n=t.IERActive.indexOf(e);if(!(n>-1))throw new Error("Can't find the EffectRenderer in the active pool");t.IERActive.splice(n,1),t.IERPool.push(e)},(0,i.default)(t,[{key:"renderTime",get:function(){return this.time}}]),t}();e.default=u,Object.defineProperty(u,"MAX_IMAGE_EFFECT_RENDERERS",{configurable:!0,enumerable:!0,writable:!0,value:10}),Object.defineProperty(u,"IERActive",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty(u,"IERPool",{configurable:!0,enumerable:!0,writable:!0,value:[]})},function(t,e,n){"use strict";var r=n(3);e.__esModule=!0,e.PanoramaRenderer=e.ImageEffectRenderer=void 0;var i=r(n(11));e.ImageEffectRenderer=i.default;var a=r(n(32));e.PanoramaRenderer=a.default},function(t,e,n){"use strict";n.r(e);var r={};n.d(r,"create",function(){return l}),n.d(r,"fromMat4",function(){return d}),n.d(r,"clone",function(){return m}),n.d(r,"copy",function(){return v}),n.d(r,"fromValues",function(){return g}),n.d(r,"set",function(){return b}),n.d(r,"identity",function(){return p}),n.d(r,"transpose",function(){return M}),n.d(r,"invert",function(){return y}),n.d(r,"adjoint",function(){return w}),n.d(r,"determinant",function(){return x}),n.d(r,"multiply",function(){return E}),n.d(r,"translate",function(){return P}),n.d(r,"rotate",function(){return R}),n.d(r,"scale",function(){return T}),n.d(r,"fromTranslation",function(){return L}),n.d(r,"fromRotation",function(){return A}),n.d(r,"fromScaling",function(){return I}),n.d(r,"fromMat2d",function(){return S}),n.d(r,"fromQuat",function(){return O}),n.d(r,"normalFromMat4",function(){return _}),n.d(r,"projection",function(){return j}),n.d(r,"str",function(){return B}),n.d(r,"frob",function(){return F}),n.d(r,"add",function(){return U}),n.d(r,"subtract",function(){return D}),n.d(r,"multiplyScalar",function(){return C}),n.d(r,"multiplyScalarAndAdd",function(){return q}),n.d(r,"exactEquals",function(){return V}),n.d(r,"equals",function(){return z}),n.d(r,"mul",function(){return X}),n.d(r,"sub",function(){return N});var i={};n.d(i,"create",function(){return Y}),n.d(i,"clone",function(){return G}),n.d(i,"copy",function(){return k}),n.d(i,"fromValues",function(){return W}),n.d(i,"set",function(){return H}),n.d(i,"identity",function(){return Q}),n.d(i,"transpose",function(){return Z}),n.d(i,"invert",function(){return K}),n.d(i,"adjoint",function(){return $}),n.d(i,"determinant",function(){return J}),n.d(i,"multiply",function(){return tt}),n.d(i,"translate",function(){return et}),n.d(i,"scale",function(){return nt}),n.d(i,"rotate",function(){return rt}),n.d(i,"rotateX",function(){return it}),n.d(i,"rotateY",function(){return at}),n.d(i,"rotateZ",function(){return ot}),n.d(i,"fromTranslation",function(){return ut}),n.d(i,"fromScaling",function(){return st}),n.d(i,"fromRotation",function(){return ct}),n.d(i,"fromXRotation",function(){return ft}),n.d(i,"fromYRotation",function(){return ht}),n.d(i,"fromZRotation",function(){return lt}),n.d(i,"fromRotationTranslation",function(){return dt}),n.d(i,"fromQuat2",function(){return mt}),n.d(i,"getTranslation",function(){return vt}),n.d(i,"getScaling",function(){return gt}),n.d(i,"getRotation",function(){return bt}),n.d(i,"fromRotationTranslationScale",function(){return pt}),n.d(i,"fromRotationTranslationScaleOrigin",function(){return Mt}),n.d(i,"fromQuat",function(){return yt}),n.d(i,"frustum",function(){return wt}),n.d(i,"perspective",function(){return xt}),n.d(i,"perspectiveFromFieldOfView",function(){return Et}),n.d(i,"ortho",function(){return Pt}),n.d(i,"lookAt",function(){return Rt}),n.d(i,"targetTo",function(){return Tt}),n.d(i,"str",function(){return Lt}),n.d(i,"frob",function(){return At}),n.d(i,"add",function(){return It}),n.d(i,"subtract",function(){return St}),n.d(i,"multiplyScalar",function(){return Ot}),n.d(i,"multiplyScalarAndAdd",function(){return _t}),n.d(i,"exactEquals",function(){return jt}),n.d(i,"equals",function(){return Bt}),n.d(i,"mul",function(){return Ft}),n.d(i,"sub",function(){return Ut});var a={};n.d(a,"create",function(){return Dt}),n.d(a,"clone",function(){return Ct}),n.d(a,"length",function(){return qt}),n.d(a,"fromValues",function(){return Vt}),n.d(a,"copy",function(){return zt}),n.d(a,"set",function(){return Xt}),n.d(a,"add",function(){return Nt}),n.d(a,"subtract",function(){return Yt}),n.d(a,"multiply",function(){return Gt}),n.d(a,"divide",function(){return kt}),n.d(a,"ceil",function(){return Wt}),n.d(a,"floor",function(){return Ht}),n.d(a,"min",function(){return Qt}),n.d(a,"max",function(){return Zt}),n.d(a,"round",function(){return Kt}),n.d(a,"scale",function(){return $t}),n.d(a,"scaleAndAdd",function(){return Jt}),n.d(a,"distance",function(){return te}),n.d(a,"squaredDistance",function(){return ee}),n.d(a,"squaredLength",function(){return ne}),n.d(a,"negate",function(){return re}),n.d(a,"inverse",function(){return ie}),n.d(a,"normalize",function(){return ae}),n.d(a,"dot",function(){return oe}),n.d(a,"cross",function(){return ue}),n.d(a,"lerp",function(){return se}),n.d(a,"hermite",function(){return ce}),n.d(a,"bezier",function(){return fe}),n.d(a,"random",function(){return he}),n.d(a,"transformMat4",function(){return le}),n.d(a,"transformMat3",function(){return de}),n.d(a,"transformQuat",function(){return me}),n.d(a,"rotateX",function(){return ve}),n.d(a,"rotateY",function(){return ge}),n.d(a,"rotateZ",function(){return be}),n.d(a,"angle",function(){return pe}),n.d(a,"zero",function(){return Me}),n.d(a,"str",function(){return ye}),n.d(a,"exactEquals",function(){return we}),n.d(a,"equals",function(){return xe}),n.d(a,"sub",function(){return Pe}),n.d(a,"mul",function(){return Re}),n.d(a,"div",function(){return Te}),n.d(a,"dist",function(){return Le}),n.d(a,"sqrDist",function(){return Ae}),n.d(a,"len",function(){return Ie}),n.d(a,"sqrLen",function(){return Se}),n.d(a,"forEach",function(){return Oe});var o={};n.d(o,"create",function(){return _e}),n.d(o,"clone",function(){return je}),n.d(o,"fromValues",function(){return Be}),n.d(o,"copy",function(){return Fe}),n.d(o,"set",function(){return Ue}),n.d(o,"add",function(){return De}),n.d(o,"subtract",function(){return Ce}),n.d(o,"multiply",function(){return qe}),n.d(o,"divide",function(){return Ve}),n.d(o,"ceil",function(){return ze}),n.d(o,"floor",function(){return Xe}),n.d(o,"min",function(){return Ne}),n.d(o,"max",function(){return Ye}),n.d(o,"round",function(){return Ge}),n.d(o,"scale",function(){return ke}),n.d(o,"scaleAndAdd",function(){return We}),n.d(o,"distance",function(){return He}),n.d(o,"squaredDistance",function(){return Qe}),n.d(o,"length",function(){return Ze}),n.d(o,"squaredLength",function(){return Ke}),n.d(o,"negate",function(){return $e}),n.d(o,"inverse",function(){return Je}),n.d(o,"normalize",function(){return tn}),n.d(o,"dot",function(){return en}),n.d(o,"cross",function(){return nn}),n.d(o,"lerp",function(){return rn}),n.d(o,"random",function(){return an}),n.d(o,"transformMat4",function(){return on}),n.d(o,"transformQuat",function(){return un}),n.d(o,"zero",function(){return sn}),n.d(o,"str",function(){return cn}),n.d(o,"exactEquals",function(){return fn}),n.d(o,"equals",function(){return hn}),n.d(o,"sub",function(){return ln}),n.d(o,"mul",function(){return dn}),n.d(o,"div",function(){return mn}),n.d(o,"dist",function(){return vn}),n.d(o,"sqrDist",function(){return gn}),n.d(o,"len",function(){return bn}),n.d(o,"sqrLen",function(){return pn}),n.d(o,"forEach",function(){return Mn});var u={};n.d(u,"create",function(){return yn}),n.d(u,"identity",function(){return wn}),n.d(u,"setAxisAngle",function(){return xn}),n.d(u,"getAxisAngle",function(){return En}),n.d(u,"getAngle",function(){return Pn}),n.d(u,"multiply",function(){return Rn}),n.d(u,"rotateX",function(){return Tn}),n.d(u,"rotateY",function(){return Ln}),n.d(u,"rotateZ",function(){return An}),n.d(u,"calculateW",function(){return In}),n.d(u,"exp",function(){return Sn}),n.d(u,"ln",function(){return On}),n.d(u,"pow",function(){return _n}),n.d(u,"slerp",function(){return jn}),n.d(u,"random",function(){return Bn}),n.d(u,"invert",function(){return Fn}),n.d(u,"conjugate",function(){return Un}),n.d(u,"fromMat3",function(){return Dn}),n.d(u,"fromEuler",function(){return Cn}),n.d(u,"str",function(){return qn}),n.d(u,"clone",function(){return Wn}),n.d(u,"fromValues",function(){return Hn}),n.d(u,"copy",function(){return Qn}),n.d(u,"set",function(){return Zn}),n.d(u,"add",function(){return Kn}),n.d(u,"mul",function(){return $n}),n.d(u,"scale",function(){return Jn}),n.d(u,"dot",function(){return tr}),n.d(u,"lerp",function(){return er}),n.d(u,"length",function(){return nr}),n.d(u,"len",function(){return rr}),n.d(u,"squaredLength",function(){return ir}),n.d(u,"sqrLen",function(){return ar}),n.d(u,"normalize",function(){return or}),n.d(u,"exactEquals",function(){return ur}),n.d(u,"equals",function(){return sr}),n.d(u,"rotationTo",function(){return cr}),n.d(u,"sqlerp",function(){return fr}),n.d(u,"setAxes",function(){return hr});var s={};n.d(s,"create",function(){return Fr}),n.d(s,"identity",function(){return Ur}),n.d(s,"setAxisAngle",function(){return Dr}),n.d(s,"getAxisAngle",function(){return Cr}),n.d(s,"getAngle",function(){return qr}),n.d(s,"multiply",function(){return Vr}),n.d(s,"rotateX",function(){return zr}),n.d(s,"rotateY",function(){return Xr}),n.d(s,"rotateZ",function(){return Nr}),n.d(s,"calculateW",function(){return Yr}),n.d(s,"exp",function(){return Gr}),n.d(s,"ln",function(){return kr}),n.d(s,"pow",function(){return Wr}),n.d(s,"slerp",function(){return Hr}),n.d(s,"random",function(){return Qr}),n.d(s,"invert",function(){return Zr}),n.d(s,"conjugate",function(){return Kr}),n.d(s,"fromMat3",function(){return $r}),n.d(s,"fromEuler",function(){return Jr}),n.d(s,"str",function(){return ti}),n.d(s,"clone",function(){return ei}),n.d(s,"fromValues",function(){return ni}),n.d(s,"copy",function(){return ri}),n.d(s,"set",function(){return ii}),n.d(s,"add",function(){return ai}),n.d(s,"mul",function(){return oi}),n.d(s,"scale",function(){return ui}),n.d(s,"dot",function(){return si}),n.d(s,"lerp",function(){return ci}),n.d(s,"length",function(){return fi}),n.d(s,"len",function(){return hi}),n.d(s,"squaredLength",function(){return li}),n.d(s,"sqrLen",function(){return di}),n.d(s,"normalize",function(){return mi}),n.d(s,"exactEquals",function(){return vi}),n.d(s,"equals",function(){return gi}),n.d(s,"rotationTo",function(){return bi}),n.d(s,"sqlerp",function(){return pi}),n.d(s,"setAxes",function(){return Mi});var c=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array,h=Math.random;Math.PI;function l(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function m(t){var e=new f(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function v(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function g(t,e,n,r,i,a,o,u,s){var c=new f(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=u,c[8]=s,c}function b(t,e,n,r,i,a,o,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t}function p(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function M(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function y(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=f*o-u*c,l=-f*a+u*s,d=c*a-o*s,m=n*h+r*l+i*d;return m?(m=1/m,t[0]=h*m,t[1]=(-f*r+i*c)*m,t[2]=(u*r-i*o)*m,t[3]=l*m,t[4]=(f*n-i*s)*m,t[5]=(-u*n+i*a)*m,t[6]=d*m,t[7]=(-c*n+r*s)*m,t[8]=(o*n-r*a)*m,t):null}function w(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=o*f-u*c,t[1]=i*c-r*f,t[2]=r*u-i*o,t[3]=u*s-a*f,t[4]=n*f-i*s,t[5]=i*a-n*u,t[6]=a*c-o*s,t[7]=r*s-n*c,t[8]=n*o-r*a,t}function x(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8];return e*(c*a-o*s)+n*(-c*i+o*u)+r*(s*i-a*u)}function E(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=n[0],d=n[1],m=n[2],v=n[3],g=n[4],b=n[5],p=n[6],M=n[7],y=n[8];return t[0]=l*r+d*o+m*c,t[1]=l*i+d*u+m*f,t[2]=l*a+d*s+m*h,t[3]=v*r+g*o+b*c,t[4]=v*i+g*u+b*f,t[5]=v*a+g*s+b*h,t[6]=p*r+M*o+y*c,t[7]=p*i+M*u+y*f,t[8]=p*a+M*s+y*h,t}function P(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=l*r+d*o+c,t[7]=l*i+d*u+f,t[8]=l*a+d*s+h,t}function R(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=Math.sin(n),d=Math.cos(n);return t[0]=d*r+l*o,t[1]=d*i+l*u,t[2]=d*a+l*s,t[3]=d*o-l*r,t[4]=d*u-l*i,t[5]=d*s-l*a,t[6]=c,t[7]=f,t[8]=h,t}function T(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function L(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function A(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function I(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function O(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,u=r+r,s=i+i,c=n*o,f=r*o,h=r*u,l=i*o,d=i*u,m=i*s,v=a*o,g=a*u,b=a*s;return t[0]=1-h-m,t[3]=f-b,t[6]=l+g,t[1]=f+b,t[4]=1-c-m,t[7]=d-v,t[2]=l-g,t[5]=d+v,t[8]=1-c-h,t}function _(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15],p=n*u-r*o,M=n*s-i*o,y=n*c-a*o,w=r*s-i*u,x=r*c-a*u,E=i*c-a*s,P=f*v-h*m,R=f*g-l*m,T=f*b-d*m,L=h*g-l*v,A=h*b-d*v,I=l*b-d*g,S=p*I-M*A+y*L+w*T-x*R+E*P;return S?(S=1/S,t[0]=(u*I-s*A+c*L)*S,t[1]=(s*T-o*I-c*R)*S,t[2]=(o*A-u*T+c*P)*S,t[3]=(i*A-r*I-a*L)*S,t[4]=(n*I-i*T+a*R)*S,t[5]=(r*T-n*A-a*P)*S,t[6]=(v*E-g*x+b*w)*S,t[7]=(g*y-m*E-b*M)*S,t[8]=(m*x-v*y+b*p)*S,t):null}function j(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function B(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function F(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function U(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function D(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function C(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function q(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function z(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],f=t[7],h=t[8],l=e[0],d=e[1],m=e[2],v=e[3],g=e[4],b=e[5],p=e[6],M=e[7],y=e[8];return Math.abs(n-l)<=c*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-d)<=c*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-m)<=c*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(a-v)<=c*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(o-g)<=c*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(u-b)<=c*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-p)<=c*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(f-M)<=c*Math.max(1,Math.abs(f),Math.abs(M))&&Math.abs(h-y)<=c*Math.max(1,Math.abs(h),Math.abs(y))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var X=E,N=D;function Y(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function G(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function W(t,e,n,r,i,a,o,u,s,c,h,l,d,m,v,g){var b=new f(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=a,b[6]=o,b[7]=u,b[8]=s,b[9]=c,b[10]=h,b[11]=l,b[12]=d,b[13]=m,b[14]=v,b[15]=g,b}function H(t,e,n,r,i,a,o,u,s,c,f,h,l,d,m,v,g){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=h,t[11]=l,t[12]=d,t[13]=m,t[14]=v,t[15]=g,t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Z(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function K(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15],p=n*u-r*o,M=n*s-i*o,y=n*c-a*o,w=r*s-i*u,x=r*c-a*u,E=i*c-a*s,P=f*v-h*m,R=f*g-l*m,T=f*b-d*m,L=h*g-l*v,A=h*b-d*v,I=l*b-d*g,S=p*I-M*A+y*L+w*T-x*R+E*P;return S?(S=1/S,t[0]=(u*I-s*A+c*L)*S,t[1]=(i*A-r*I-a*L)*S,t[2]=(v*E-g*x+b*w)*S,t[3]=(l*x-h*E-d*w)*S,t[4]=(s*T-o*I-c*R)*S,t[5]=(n*I-i*T+a*R)*S,t[6]=(g*y-m*E-b*M)*S,t[7]=(f*E-l*y+d*M)*S,t[8]=(o*A-u*T+c*P)*S,t[9]=(r*T-n*A-a*P)*S,t[10]=(m*x-v*y+b*p)*S,t[11]=(h*y-f*x-d*p)*S,t[12]=(u*R-o*L-s*P)*S,t[13]=(n*L-r*R+i*P)*S,t[14]=(v*M-m*w-g*p)*S,t[15]=(f*w-h*M+l*p)*S,t):null}function $(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],m=e[12],v=e[13],g=e[14],b=e[15];return t[0]=u*(l*b-d*g)-h*(s*b-c*g)+v*(s*d-c*l),t[1]=-(r*(l*b-d*g)-h*(i*b-a*g)+v*(i*d-a*l)),t[2]=r*(s*b-c*g)-u*(i*b-a*g)+v*(i*c-a*s),t[3]=-(r*(s*d-c*l)-u*(i*d-a*l)+h*(i*c-a*s)),t[4]=-(o*(l*b-d*g)-f*(s*b-c*g)+m*(s*d-c*l)),t[5]=n*(l*b-d*g)-f*(i*b-a*g)+m*(i*d-a*l),t[6]=-(n*(s*b-c*g)-o*(i*b-a*g)+m*(i*c-a*s)),t[7]=n*(s*d-c*l)-o*(i*d-a*l)+f*(i*c-a*s),t[8]=o*(h*b-d*v)-f*(u*b-c*v)+m*(u*d-c*h),t[9]=-(n*(h*b-d*v)-f*(r*b-a*v)+m*(r*d-a*h)),t[10]=n*(u*b-c*v)-o*(r*b-a*v)+m*(r*c-a*u),t[11]=-(n*(u*d-c*h)-o*(r*d-a*h)+f*(r*c-a*u)),t[12]=-(o*(h*g-l*v)-f*(u*g-s*v)+m*(u*l-s*h)),t[13]=n*(h*g-l*v)-f*(r*g-i*v)+m*(r*l-i*h),t[14]=-(n*(u*g-s*v)-o*(r*g-i*v)+m*(r*s-i*u)),t[15]=n*(u*l-s*h)-o*(r*l-i*h)+f*(r*s-i*u),t}function J(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],s=t[7],c=t[8],f=t[9],h=t[10],l=t[11],d=t[12],m=t[13],v=t[14],g=t[15];return(e*o-n*a)*(h*g-l*v)-(e*u-r*a)*(f*g-l*m)+(e*s-i*a)*(f*v-h*m)+(n*u-r*o)*(c*g-l*d)-(n*s-i*o)*(c*v-h*d)+(r*s-i*u)*(c*m-f*d)}function tt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],m=e[11],v=e[12],g=e[13],b=e[14],p=e[15],M=n[0],y=n[1],w=n[2],x=n[3];return t[0]=M*r+y*u+w*h+x*v,t[1]=M*i+y*s+w*l+x*g,t[2]=M*a+y*c+w*d+x*b,t[3]=M*o+y*f+w*m+x*p,M=n[4],y=n[5],w=n[6],x=n[7],t[4]=M*r+y*u+w*h+x*v,t[5]=M*i+y*s+w*l+x*g,t[6]=M*a+y*c+w*d+x*b,t[7]=M*o+y*f+w*m+x*p,M=n[8],y=n[9],w=n[10],x=n[11],t[8]=M*r+y*u+w*h+x*v,t[9]=M*i+y*s+w*l+x*g,t[10]=M*a+y*c+w*d+x*b,t[11]=M*o+y*f+w*m+x*p,M=n[12],y=n[13],w=n[14],x=n[15],t[12]=M*r+y*u+w*h+x*v,t[13]=M*i+y*s+w*l+x*g,t[14]=M*a+y*c+w*d+x*b,t[15]=M*o+y*f+w*m+x*p,t}function et(t,e,n){var r,i,a,o,u,s,c,f,h,l,d,m,v=n[0],g=n[1],b=n[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*b+e[12],t[13]=e[1]*v+e[5]*g+e[9]*b+e[13],t[14]=e[2]*v+e[6]*g+e[10]*b+e[14],t[15]=e[3]*v+e[7]*g+e[11]*b+e[15]):(r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=e[9],d=e[10],m=e[11],t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=u,t[5]=s,t[6]=c,t[7]=f,t[8]=h,t[9]=l,t[10]=d,t[11]=m,t[12]=r*v+u*g+h*b+e[12],t[13]=i*v+s*g+l*b+e[13],t[14]=a*v+c*g+d*b+e[14],t[15]=o*v+f*g+m*b+e[15]),t}function nt(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function rt(t,e,n,r){var i,a,o,u,s,f,h,l,d,m,v,g,b,p,M,y,w,x,E,P,R,T,L,A,I=r[0],S=r[1],O=r[2],_=Math.hypot(I,S,O);return _<c?null:(I*=_=1/_,S*=_,O*=_,i=Math.sin(n),o=1-(a=Math.cos(n)),u=e[0],s=e[1],f=e[2],h=e[3],l=e[4],d=e[5],m=e[6],v=e[7],g=e[8],b=e[9],p=e[10],M=e[11],y=I*I*o+a,w=S*I*o+O*i,x=O*I*o-S*i,E=I*S*o-O*i,P=S*S*o+a,R=O*S*o+I*i,T=I*O*o+S*i,L=S*O*o-I*i,A=O*O*o+a,t[0]=u*y+l*w+g*x,t[1]=s*y+d*w+b*x,t[2]=f*y+m*w+p*x,t[3]=h*y+v*w+M*x,t[4]=u*E+l*P+g*R,t[5]=s*E+d*P+b*R,t[6]=f*E+m*P+p*R,t[7]=h*E+v*P+M*R,t[8]=u*T+l*L+g*A,t[9]=s*T+d*L+b*A,t[10]=f*T+m*L+p*A,t[11]=h*T+v*L+M*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function it(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],u=e[6],s=e[7],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+f*r,t[6]=u*i+h*r,t[7]=s*i+l*r,t[8]=c*i-a*r,t[9]=f*i-o*r,t[10]=h*i-u*r,t[11]=l*i-s*r,t}function at(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],u=e[2],s=e[3],c=e[8],f=e[9],h=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-f*r,t[2]=u*i-h*r,t[3]=s*i-l*r,t[8]=a*r+c*i,t[9]=o*r+f*i,t[10]=u*r+h*i,t[11]=s*r+l*i,t}function ot(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],u=e[2],s=e[3],c=e[4],f=e[5],h=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+f*r,t[2]=u*i+h*r,t[3]=s*i+l*r,t[4]=c*i-a*r,t[5]=f*i-o*r,t[6]=h*i-u*r,t[7]=l*i-s*r,t}function ut(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function st(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ct(t,e,n){var r,i,a,o=n[0],u=n[1],s=n[2],f=Math.hypot(o,u,s);return f<c?null:(o*=f=1/f,u*=f,s*=f,r=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=u*o*a+s*r,t[2]=s*o*a-u*r,t[3]=0,t[4]=o*u*a-s*r,t[5]=u*u*a+i,t[6]=s*u*a+o*r,t[7]=0,t[8]=o*s*a+u*r,t[9]=u*s*a-o*r,t[10]=s*s*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ft(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ht(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function lt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dt(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=r+r,s=i+i,c=a+a,f=r*u,h=r*s,l=r*c,d=i*s,m=i*c,v=a*c,g=o*u,b=o*s,p=o*c;return t[0]=1-(d+v),t[1]=h+p,t[2]=l-b,t[3]=0,t[4]=h-p,t[5]=1-(f+v),t[6]=m+g,t[7]=0,t[8]=l+b,t[9]=m-g,t[10]=1-(f+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function mt(t,e){var n=new f(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],u=e[4],s=e[5],c=e[6],h=e[7],l=r*r+i*i+a*a+o*o;return l>0?(n[0]=2*(u*o+h*r+s*a-c*i)/l,n[1]=2*(s*o+h*i+c*r-u*a)/l,n[2]=2*(c*o+h*a+u*i-s*r)/l):(n[0]=2*(u*o+h*r+s*a-c*i),n[1]=2*(s*o+h*i+c*r-u*a),n[2]=2*(c*o+h*a+u*i-s*r)),dt(t,e,n),t}function vt(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function gt(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(a,o,u),t[2]=Math.hypot(s,c,f),t}function bt(t,e){var n=new f(3);gt(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,u=e[1]*i,s=e[2]*a,c=e[4]*r,h=e[5]*i,l=e[6]*a,d=e[8]*r,m=e[9]*i,v=e[10]*a,g=o+h+v,b=0;return g>0?(b=2*Math.sqrt(g+1),t[3]=.25*b,t[0]=(l-m)/b,t[1]=(d-s)/b,t[2]=(u-c)/b):o>h&&o>v?(b=2*Math.sqrt(1+o-h-v),t[3]=(l-m)/b,t[0]=.25*b,t[1]=(u+c)/b,t[2]=(d+s)/b):h>v?(b=2*Math.sqrt(1+h-o-v),t[3]=(d-s)/b,t[0]=(u+c)/b,t[1]=.25*b,t[2]=(l+m)/b):(b=2*Math.sqrt(1+v-o-h),t[3]=(u-c)/b,t[0]=(d+s)/b,t[1]=(l+m)/b,t[2]=.25*b),t}function pt(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=e[3],s=i+i,c=a+a,f=o+o,h=i*s,l=i*c,d=i*f,m=a*c,v=a*f,g=o*f,b=u*s,p=u*c,M=u*f,y=r[0],w=r[1],x=r[2];return t[0]=(1-(m+g))*y,t[1]=(l+M)*y,t[2]=(d-p)*y,t[3]=0,t[4]=(l-M)*w,t[5]=(1-(h+g))*w,t[6]=(v+b)*w,t[7]=0,t[8]=(d+p)*x,t[9]=(v-b)*x,t[10]=(1-(h+m))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Mt(t,e,n,r,i){var a=e[0],o=e[1],u=e[2],s=e[3],c=a+a,f=o+o,h=u+u,l=a*c,d=a*f,m=a*h,v=o*f,g=o*h,b=u*h,p=s*c,M=s*f,y=s*h,w=r[0],x=r[1],E=r[2],P=i[0],R=i[1],T=i[2],L=(1-(v+b))*w,A=(d+y)*w,I=(m-M)*w,S=(d-y)*x,O=(1-(l+b))*x,_=(g+p)*x,j=(m+M)*E,B=(g-p)*E,F=(1-(l+v))*E;return t[0]=L,t[1]=A,t[2]=I,t[3]=0,t[4]=S,t[5]=O,t[6]=_,t[7]=0,t[8]=j,t[9]=B,t[10]=F,t[11]=0,t[12]=n[0]+P-(L*P+S*R+j*T),t[13]=n[1]+R-(A*P+O*R+B*T),t[14]=n[2]+T-(I*P+_*R+F*T),t[15]=1,t}function yt(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,u=r+r,s=i+i,c=n*o,f=r*o,h=r*u,l=i*o,d=i*u,m=i*s,v=a*o,g=a*u,b=a*s;return t[0]=1-h-m,t[1]=f+b,t[2]=l-g,t[3]=0,t[4]=f-b,t[5]=1-c-m,t[6]=d+v,t[7]=0,t[8]=l+g,t[9]=d-v,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wt(t,e,n,r,i,a,o){var u=1/(n-e),s=1/(i-r),c=1/(a-o);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*s,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function xt(t,e,n,r,i){var a,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(r-i),t[10]=(i+r)*a,t[14]=2*i*r*a):(t[10]=-1,t[14]=-2*r),t}function Et(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(o+u),c=2/(i+a);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Pt(t,e,n,r,i,a,o){var u=1/(e-n),s=1/(r-i),c=1/(a-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(o+a)*c,t[15]=1,t}function Rt(t,e,n,r){var i,a,o,u,s,f,h,l,d,m,v=e[0],g=e[1],b=e[2],p=r[0],M=r[1],y=r[2],w=n[0],x=n[1],E=n[2];return Math.abs(v-w)<c&&Math.abs(g-x)<c&&Math.abs(b-E)<c?Q(t):(h=v-w,l=g-x,d=b-E,i=M*(d*=m=1/Math.hypot(h,l,d))-y*(l*=m),a=y*(h*=m)-p*d,o=p*l-M*h,(m=Math.hypot(i,a,o))?(i*=m=1/m,a*=m,o*=m):(i=0,a=0,o=0),u=l*o-d*a,s=d*i-h*o,f=h*a-l*i,(m=Math.hypot(u,s,f))?(u*=m=1/m,s*=m,f*=m):(u=0,s=0,f=0),t[0]=i,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=s,t[6]=l,t[7]=0,t[8]=o,t[9]=f,t[10]=d,t[11]=0,t[12]=-(i*v+a*g+o*b),t[13]=-(u*v+s*g+f*b),t[14]=-(h*v+l*g+d*b),t[15]=1,t)}function Tt(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=r[0],s=r[1],c=r[2],f=i-n[0],h=a-n[1],l=o-n[2],d=f*f+h*h+l*l;d>0&&(f*=d=1/Math.sqrt(d),h*=d,l*=d);var m=s*l-c*h,v=c*f-u*l,g=u*h-s*f;return(d=m*m+v*v+g*g)>0&&(m*=d=1/Math.sqrt(d),v*=d,g*=d),t[0]=m,t[1]=v,t[2]=g,t[3]=0,t[4]=h*g-l*v,t[5]=l*m-f*g,t[6]=f*v-h*m,t[7]=0,t[8]=f,t[9]=h,t[10]=l,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Lt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function At(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function It(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function St(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function Ot(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function _t(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function jt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Bt(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],f=t[7],h=t[8],l=t[9],d=t[10],m=t[11],v=t[12],g=t[13],b=t[14],p=t[15],M=e[0],y=e[1],w=e[2],x=e[3],E=e[4],P=e[5],R=e[6],T=e[7],L=e[8],A=e[9],I=e[10],S=e[11],O=e[12],_=e[13],j=e[14],B=e[15];return Math.abs(n-M)<=c*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(r-y)<=c*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(i-w)<=c*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(a-x)<=c*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-E)<=c*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(u-P)<=c*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(s-R)<=c*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(f-T)<=c*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(h-L)<=c*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(l-A)<=c*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(d-I)<=c*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(m-S)<=c*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(v-O)<=c*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(g-_)<=c*Math.max(1,Math.abs(g),Math.abs(_))&&Math.abs(b-j)<=c*Math.max(1,Math.abs(b),Math.abs(j))&&Math.abs(p-B)<=c*Math.max(1,Math.abs(p),Math.abs(B))}var Ft=tt,Ut=St;function Dt(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ct(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qt(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Vt(t,e,n){var r=new f(3);return r[0]=t,r[1]=e,r[2]=n,r}function zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Xt(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Nt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function Yt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function Gt(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function kt(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function Wt(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function Ht(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function Qt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function Zt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Kt(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function $t(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function Jt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function te(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.hypot(n,r,i)}function ee(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function ne(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function re(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ie(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ae(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function oe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ue(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],u=n[1],s=n[2];return t[0]=i*s-a*u,t[1]=a*o-r*s,t[2]=r*u-i*o,t}function se(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function ce(t,e,n,r,i,a){var o=a*a,u=o*(2*a-3)+1,s=o*(a-2)+a,c=o*(a-1),f=o*(3-2*a);return t[0]=e[0]*u+n[0]*s+r[0]*c+i[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+i[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+i[2]*f,t}function fe(t,e,n,r,i,a){var o=1-a,u=o*o,s=a*a,c=u*o,f=3*a*u,h=3*s*o,l=s*a;return t[0]=e[0]*c+n[0]*f+r[0]*h+i[0]*l,t[1]=e[1]*c+n[1]*f+r[1]*h+i[1]*l,t[2]=e[2]*c+n[2]*f+r[2]*h+i[2]*l,t}function he(t,e){e=e||1;var n=2*h()*Math.PI,r=2*h()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function le(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function de(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function me(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],u=e[0],s=e[1],c=e[2],f=i*c-a*s,h=a*u-r*c,l=r*s-i*u,d=i*l-a*h,m=a*f-r*l,v=r*h-i*f,g=2*o;return f*=g,h*=g,l*=g,d*=2,m*=2,v*=2,t[0]=u+f+d,t[1]=s+h+m,t[2]=c+l+v,t}function ve(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function ge(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function be(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t}function pe(t,e){var n=Vt(t[0],t[1],t[2]),r=Vt(e[0],e[1],e[2]);ae(n,n),ae(r,r);var i=oe(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function Me(t){return t[0]=0,t[1]=0,t[2]=0,t}function ye(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function we(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function xe(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],u=e[2];return Math.abs(n-a)<=c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-u)<=c*Math.max(1,Math.abs(i),Math.abs(u))}var Ee,Pe=Yt,Re=Gt,Te=kt,Le=te,Ae=ee,Ie=qt,Se=ne,Oe=(Ee=Dt(),function(t,e,n,r,i,a){var o,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,o=n;o<u;o+=e)Ee[0]=t[o],Ee[1]=t[o+1],Ee[2]=t[o+2],i(Ee,Ee,a),t[o]=Ee[0],t[o+1]=Ee[1],t[o+2]=Ee[2];return t});function _e(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function je(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Be(t,e,n,r){var i=new f(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function Fe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ue(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function De(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Ce(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function qe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Ve(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function ze(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Xe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ne(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function Ye(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function Ge(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function ke(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function We(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function He(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.hypot(n,r,i,a)}function Qe(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return n*n+r*r+i*i+a*a}function Ze(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Ke(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function $e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function Je(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function tn(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function en(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function nn(t,e,n,r){var i=n[0]*r[1]-n[1]*r[0],a=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],u=n[1]*r[2]-n[2]*r[1],s=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],f=e[0],h=e[1],l=e[2],d=e[3];return t[0]=h*c-l*s+d*u,t[1]=-f*c+l*o-d*a,t[2]=f*s-h*o+d*i,t[3]=-f*u+h*a-l*i,t}function rn(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=u+r*(n[3]-u),t}function an(t,e){var n,r,i,a,o,u;e=e||1;do{o=(n=2*h()-1)*n+(r=2*h()-1)*r}while(o>=1);do{u=(i=2*h()-1)*i+(a=2*h()-1)*a}while(u>=1);var s=Math.sqrt((1-o)/u);return t[0]=e*n,t[1]=e*r,t[2]=e*i*s,t[3]=e*a*s,t}function on(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}function un(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*a-s*i,h=c*i+s*r-o*a,l=c*a+o*i-u*r,d=-o*r-u*i-s*a;return t[0]=f*c+d*-o+h*-s-l*-u,t[1]=h*c+d*-u+l*-o-f*-s,t[2]=l*c+d*-s+f*-u-h*-o,t[3]=e[3],t}function sn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function cn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function hn(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],u=e[1],s=e[2],f=e[3];return Math.abs(n-o)<=c*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-u)<=c*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=c*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-f)<=c*Math.max(1,Math.abs(a),Math.abs(f))}var ln=Ce,dn=qe,mn=Ve,vn=He,gn=Qe,bn=Ze,pn=Ke,Mn=function(){var t=_e();return function(e,n,r,i,a,o){var u,s;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],a(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}();function yn(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function wn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function xn(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function En(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>c?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Pn(t,e){var n=tr(t,e);return Math.acos(2*n*n-1)}function Rn(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+o*u+i*c-a*s,t[1]=i*f+o*s+a*u-r*c,t[2]=a*f+o*c+r*s-i*u,t[3]=o*f-r*u-i*s-a*c,t}function Tn(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=a*s-i*u,t[3]=o*s-r*u,t}function Ln(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-a*u,t[1]=i*s+o*u,t[2]=a*s+r*u,t[3]=o*s-i*u,t}function An(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=i*s-r*u,t[2]=a*s+o*u,t[3]=o*s-a*u,t}function In(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Sn(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),u=Math.exp(a),s=o>0?u*Math.sin(o)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=u*Math.cos(o),t}function On(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),u=o>0?Math.atan2(o,a)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=.5*Math.log(n*n+r*r+i*i+a*a),t}function _n(t,e,n){return On(t,e),Jn(t,t,n),Sn(t,t),t}function jn(t,e,n,r){var i,a,o,u,s,f=e[0],h=e[1],l=e[2],d=e[3],m=n[0],v=n[1],g=n[2],b=n[3];return(a=f*m+h*v+l*g+d*b)<0&&(a=-a,m=-m,v=-v,g=-g,b=-b),1-a>c?(i=Math.acos(a),o=Math.sin(i),u=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o):(u=1-r,s=r),t[0]=u*f+s*m,t[1]=u*h+s*v,t[2]=u*l+s*g,t[3]=u*d+s*b,t}function Bn(t){var e=h(),n=h(),r=h(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function Fn(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,u=o?1/o:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-i*u,t[3]=a*u,t}function Un(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Dn(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function Cn(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=a*s*f-o*u*c,t[1]=o*u*f+a*s*c,t[2]=o*s*c-a*u*f,t[3]=o*s*f+a*u*c,t}function qn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Vn,zn,Xn,Nn,Yn,Gn,kn,Wn=je,Hn=Be,Qn=Fe,Zn=Ue,Kn=De,$n=Rn,Jn=ke,tr=en,er=rn,nr=Ze,rr=nr,ir=Ke,ar=ir,or=tn,ur=fn,sr=hn,cr=(Vn=Dt(),zn=Vt(1,0,0),Xn=Vt(0,1,0),function(t,e,n){var r=oe(e,n);return r<-.999999?(ue(Vn,zn,e),Ie(Vn)<1e-6&&ue(Vn,Xn,e),ae(Vn,Vn),xn(t,Vn,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(ue(Vn,e,n),t[0]=Vn[0],t[1]=Vn[1],t[2]=Vn[2],t[3]=1+r,or(t,t))}),fr=(Nn=yn(),Yn=yn(),function(t,e,n,r,i,a){return jn(Nn,e,i,a),jn(Yn,n,r,a),jn(t,Nn,Yn,2*a*(1-a)),t}),hr=(Gn=l(),function(t,e,n,r){return Gn[0]=n[0],Gn[3]=n[1],Gn[6]=n[2],Gn[1]=r[0],Gn[4]=r[1],Gn[7]=r[2],Gn[2]=-e[0],Gn[5]=-e[1],Gn[8]=-e[2],or(t,Dn(t,Gn))}),lr=n(10),dr=n(1),mr=n.n(dr),vr=(kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}kn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gr=function(){return function(){this.press=!1,this.down=!1,this.oldDown=!1,this.hit=!1,this.downTime=0}}(),br=function(t){function e(e){var n=t.call(this)||this;n.mousePos=new Float32Array([0,0]),n.previousMousePos=new Float32Array([0,0]),n.mouseVelocity=new Float32Array([0,0]),n.normalized=new Float32Array([0,0]),n.mouseClickCallbacks=[],n.buttons=[],n.resetSpeed=!1,n.onMouseStart=function(t){t.preventDefault();var e=!1;window.TouchEvent&&t instanceof TouchEvent?(e=!0,n.setMouse(t.targetTouches[0])):n.setMouse(t),n.resetSpeed=!0,n.buttons[e?0:t.which-1].press=!0;for(var r=0;r<n.mouseClickCallbacks.length;r++)n.mouseClickCallbacks[r].call(n)},n.canvas=e;for(var r=0;r<3;r++)n.buttons.push(new gr);return n.touchMoveListener=function(t){return n.setMouse(t.targetTouches[0])},n.mouseMoveListener=function(t){return n.setMouse(t)},n.endListener=function(){n.buttons[0].press=!1},n.canvas.addEventListener("touchstart",n.onMouseStart,!1),n.canvas.addEventListener("touchmove",n.touchMoveListener,!1),n.canvas.addEventListener("touchend",n.endListener,!1),n.canvas.addEventListener("touchcancel",n.endListener,!1),n.canvas.addEventListener("mousedown",n.onMouseStart,!1),n.canvas.addEventListener("mousemove",n.mouseMoveListener,!1),n.canvas.addEventListener("mouseup",n.endListener,!1),n.canvas.addEventListener("mousecancel",n.endListener,!1),n.canvas.addEventListener("mouseout",n.endListener,!1),n}return vr(e,t),e.prototype.setMouse=function(t){this.mousePos[0]=t.pageX,this.mousePos[1]=t.pageY},e.prototype.getNormalizedVelocity=function(){return this.mouseVelocity},e.prototype.getMouseDown=function(){return this.buttons[0].press},e.prototype.update=function(){this.normalized[0]=this.mousePos[0]/this.canvas.clientWidth,this.normalized[1]=this.mousePos[1]/this.canvas.clientHeight,this.resetSpeed?(this.resetSpeed=!1,this.mouseVelocity[0]=0,this.mouseVelocity[1]=0):(this.mouseVelocity[0]=this.normalized[0]-this.previousMousePos[0],this.mouseVelocity[1]=this.normalized[1]-this.previousMousePos[1]),this.previousMousePos[0]=this.normalized[0],this.previousMousePos[1]=this.normalized[1];for(var t=0;t<3;t++){var e=this.buttons[t];e.hit=!1,e.down=!1,this.buttons[t].press?(0===e.downTime&&(e.down=!0),e.downTime++):(e.hit=e.downTime<15&&e.oldDown,e.downTime=0),e.oldDown=e.press}},e.prototype.dispose=function(){this.isDisposed()||(this.canvas&&(this.canvas.removeEventListener("touchstart",this.onMouseStart,!1),this.canvas.removeEventListener("touchmove",this.touchMoveListener,!1),this.canvas.removeEventListener("touchend",this.endListener,!1),this.canvas.removeEventListener("touchcancel",this.endListener,!1),this.canvas.removeEventListener("mousedown",this.onMouseStart,!1),this.canvas.removeEventListener("mousemove",this.mouseMoveListener,!1),this.canvas.removeEventListener("mouseend",this.endListener,!1),this.canvas.removeEventListener("mousecancel",this.endListener,!1),this.canvas.removeEventListener("mouseout",this.endListener,!1)),this.normalized=null,this.mouseVelocity=null,this.previousMousePos=null),t.prototype.dispose.call(this)},e}(mr.a),pr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rotateSpeedX=0,e.rotateSpeedY=0,e.rotateX=u.create(),e.rotateY=u.create(),e}return vr(e,t),e.prototype.init=function(t,e){this.renderer=t,this.settings=Object.assign({rotateInertia:.95,smoothness:.75},e),this.mouseListener=new br(this.renderer.getCanvas())},e.prototype.update=function(t){this.mouseListener.update();var n=this.renderer.getAspect(),r=Math.PI/180,i=.5/Math.tan(this.renderer.getFov()*(.5*r)),a=Math.atan2(.5*n,i)*(360/Math.PI);if(this.mouseListener.getMouseDown()){var o=this.mouseListener.getNormalizedVelocity();this.rotateSpeedX=e.lerp(-o[0]*a,this.rotateSpeedX,this.settings.smoothness),this.rotateSpeedY=e.lerp(o[1]*this.renderer.getFov(),this.rotateSpeedY,this.settings.smoothness)}else this.rotateSpeedX*=this.settings.rotateInertia,this.rotateSpeedY*=this.settings.rotateInertia;u.identity(this.rotateY),u.identity(this.rotateX),u.rotateY(this.rotateY,this.rotateY,this.rotateSpeedX*r),u.rotateX(this.rotateX,this.rotateX,-this.rotateSpeedY*r),u.multiply(t,this.rotateX,t),u.multiply(t,t,this.rotateY)},e.lerp=function(t,e,n){return(1-n)*t+n*e},e.prototype.dispose=function(){this.isDisposed()||this.mouseListener.dispose(),t.prototype.dispose.call(this)},e}(mr.a),Mr=function(t){function e(e,n,s){void 0===s&&(s={});var c=t.call(this)||this;if(c.transitionProgress=1,c.animationLoop=!1,c.rotation=u.create(),c.rotationStart=u.create(),c.rotationEnd=u.create(),c.projection=i.create(),c.view=i.create(),c.viewProjection=i.create(),c.invViewProjection=i.create(),c.screenPos=o.create(),c.tempM3=r.create(),c.tempV3=a.create(),c.tempV4=o.create(),c.settings=Object.assign({fov:60,barrelDistortion:.1,shader:!1,imageEffectRendererBuffer:!1,canvas:!1,rotationController:!1,rotationControllerSettings:{}},s),c.settings.imageEffectRendererBuffer?c.imageEffectRendererBuffer=c.settings.imageEffectRendererBuffer:(c.imageEffectRenderer=lr.ImageEffectRenderer.createTemporary(e,c.getShader()),c.imageEffectRendererBuffer=c.imageEffectRenderer.getMainBuffer()),c.canvas=c.settings.canvas?c.settings.canvas:e?e.querySelector("canvas"):null,!c.canvas)throw new Error("Unable to find panorama canvas");return c.settings.rotationController?c.rotationController=c.settings.rotationController:c.rotationController=new pr,c.rotationController.init(c,c.settings.rotationControllerSettings),n&&c.addImage(n),i.identity(c.view),u.identity(c.rotation),c}return vr(e,t),e.prototype.init=function(){this.play()},e.prototype.getFov=function(){return this.settings.fov},e.prototype.setFov=function(t){this.settings.fov=t},e.prototype.getBarrelDistortion=function(){return this.settings.barrelDistortion},e.prototype.setBarrelDistortion=function(t){this.settings.barrelDistortion=t},e.prototype.getAspect=function(){return this.getCanvas().width/this.getCanvas().height},e.prototype.update=function(){var t=this;!this.isDisposed()&&this.animationLoop&&(window.requestAnimationFrame(function(){return t.update()}),this.rotationController.update(this.rotation),this.transitionProgress<1&&(this.transitionProgress+=.016,u.slerp(this.rotation,this.rotationStart,this.rotationEnd,e.smoothstep01(this.transitionProgress))),this.updateViewProjection(this.getFov(),this.getAspect()),i.invert(this.invViewProjection,this.viewProjection),this.getRendererBuffer().setUniformMatrix("uInvViewProjection",this.invViewProjection),this.getRendererBuffer().setUniformFloat("uBarrelDistortion",this.getBarrelDistortion()),this.imageEffectRenderer&&this.imageEffectRenderer.draw())},e.prototype.getProjectedPosition=function(t){var e=this.screenPos;e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,o.transformMat4(e,e,this.viewProjection),e[0]/=e[3],e[1]/=e[3];var n=Math.sqrt(e[0]*e[0]+e[1]*e[1]),r=this.getBarrelDistortion();if(r*n>0){var i=Math.pow(9*r*r*n+Math.sqrt(3)*Math.sqrt(27*r*r*r*r*n*n+4*r*r*r),1/3),a=i/(Math.pow(2,1/3)*Math.pow(3,2/3)*r),u=(a-=Math.pow(2/3,1/3)/i)/n;e[0]=e[0]*u,e[1]=e[1]*u}return e[0]=.5*e[0]+.5,e[1]=-.5*e[1]+.5,[e[0],e[1],e[2]]},e.prototype.lookAtPosition=function(t,e){void 0===e&&(e=0),a.set(this.tempV3,-t[0],-t[1],-t[2]),a.normalize(this.tempV3,this.tempV3),i.lookAt(this.view,this.tempV3,a.fromValues(0,0,0),a.fromValues(0,1,0)),r.normalFromMat4(this.tempM3,this.view),e>0?(this.transitionProgress=0,u.copy(this.rotationStart,this.rotation),u.fromMat3(this.rotationEnd,this.tempM3)):u.fromMat3(this.rotation,this.tempM3)},e.prototype.getCanvas=function(){return this.imageEffectRenderer?this.imageEffectRenderer.getCanvas():this.canvas},e.prototype.get3dPositionFrom2DPosition=function(t,e){var n=2*t-1,r=1-e,i=n*n+(r=2*r-1)*r,a=1+this.getBarrelDistortion()*i;n*=a,r*=a;var u=this.tempV4;return o.set(u,n,r,1,1),o.transformMat4(u,u,this.invViewProjection),[u[0],u[1],u[2]]},e.prototype.play=function(){this.animationLoop=!0,this.update()},e.prototype.pause=function(){this.animationLoop=!1},e.prototype.addImage=function(t,e,n){void 0===e&&(e=!0),this.getRendererBuffer().addImage(t,0,!0,!0,e,n)},e.prototype.updateImage=function(t,e,n){void 0===e&&(e=!0),this.getRendererBuffer().updateImage(t,0,!0,!0,e,n)},e.prototype.getRendererBuffer=function(){return this.imageEffectRendererBuffer},e.prototype.updateViewProjection=function(t,e){i.perspective(this.projection,t*(Math.PI/180),e,.01,100),i.fromQuat(this.view,this.rotation),i.multiply(this.viewProjection,this.projection,this.view)},e.prototype.getShader=function(){return this.settings.shader?this.settings.shader:"uniform mat4 uInvViewProjection;      uniform float uBarrelDistortion;      vec2 getEqUV(vec3 rd)          {           vec2 uv = vec2(atan(rd.z, rd.x), asin(rd.y));        uv *= vec2(0.1591,0.3183);        uv.y += 0.5;        return fract(uv);          }          void mainImage( out vec4 c, vec2 p )          {              vec2 uv = vUV0 * 2. - 1.;              float r2 = dot(uv,uv);              uv.xy *= 1.0 + uBarrelDistortion * r2;              vec4 rd = vec4(uv, 1., 1.);              rd = uInvViewProjection * rd;              rd.xyz = normalize(rd.xyz);              c.xyz = texture(iChannel0, getEqUV(rd.xyz)).xyz;      }"},e.smoothstep01=function(t){var e=t;return e<0&&(e=0),e>1&&(e=1),e*e*(3-2*e)},e.prototype.dispose=function(){this.isDisposed()||this.imageEffectRenderer&&lr.ImageEffectRenderer.releaseTemporary(this.imageEffectRenderer),t.prototype.dispose.call(this)},e}(mr.a),yr=function(){function t(){}return t.loadImages=function(e){return Promise.all(e.map(function(e){return t.loadImage(e)}))},t.loadImage=function(t){return new Promise(function(e){var n=new Image;n.onload=function(){return e(n)},n.src="../static/"+t})},t}(),wr=function(){function t(t){this.hotspotVisuals=[],this.hotspots=[],this.wrapper=t,yr.loadImages(["panorama_1.jpg"]).then(this.init.bind(this))}return t.prototype.init=function(t){var e=this;this.renderer=new Mr(this.wrapper.querySelector(".canvas"),t[0]),this.renderer.init(),this.wrapper.querySelector(".js-play").addEventListener("click",function(){return e.renderer.play()}),this.wrapper.querySelector(".js-stop").addEventListener("click",function(){return e.renderer.pause()});var n=[.5,.5,1];this.createHotspot(n),this.renderer.lookAtPosition(new Float32Array(n)),this.renderer.getCanvas().onmousedown=function(t){var n=e.renderer.getCanvas().getBoundingClientRect(),r=(t.clientX-n.left)/n.width,i=(t.clientY-n.top)/n.height;if(r>=0&&r<=1&&i>=0&&i<=1){var a=e.renderer.get3dPositionFrom2DPosition(r,i);e.createHotspot(a),e.renderer.lookAtPosition(new Float32Array(a),2)}},this.tick()},t.prototype.createHotspot=function(t){var e=document.createElement("div");e.style.zIndex="1",e.style.width="10px",e.style.height="10px",e.style.backgroundColor="#FF0000",e.style.position="absolute",this.wrapper.querySelector(".canvas").appendChild(e),this.hotspotVisuals.push(e),this.hotspots.push(new Float32Array(t))},t.prototype.tick=function(){var t=this;window.requestAnimationFrame(function(){return t.tick()});for(var e=0;e<this.hotspots.length;e++){var n=this.hotspots[e],r=this.renderer.getProjectedPosition(n);if(r[2]>0&&r[0]>=0&&r[0]<1&&r[1]>=0&&r[1]<1){var i=r[0]*this.renderer.getCanvas().width-5,a=r[1]*this.renderer.getCanvas().height-5;this.hotspotVisuals[e].style.left=i+"px",this.hotspotVisuals[e].style.top=a+"px",this.hotspotVisuals[e].style.display="block"}else this.hotspotVisuals[e].style.display="none"}},t}(),xr=function(){function t(t){this.wrapper=t,this.video=document.querySelector(".js-video"),yr.loadImages(["panorama_1.jpg"]).then(this.init.bind(this))}return t.prototype.init=function(){var t=this;this.renderer=new Mr(this.wrapper.querySelector(".canvas"),this.video),this.renderer.init(),this.wrapper.querySelector(".js-play").addEventListener("click",function(){return t.renderer.play()}),this.wrapper.querySelector(".js-stop").addEventListener("click",function(){return t.renderer.pause()}),this.video.addEventListener("play",this.onVideoPlay.bind(this)),this.video.play()},t.prototype.onVideoPlay=function(){requestAnimationFrame(this.tick.bind(this))},t.prototype.tick=function(){this.renderer.updateImage(this.video),requestAnimationFrame(this.tick.bind(this))},t}(),Er=n(20),Pr=1e-6,Rr="undefined"!=typeof Float32Array?Float32Array:Array,Tr=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Lr(){var t=new Rr(3);return Rr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ar(t,e,n){var r=new Rr(3);return r[0]=t,r[1]=e,r[2]=n,r}function Ir(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function Sr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Or(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],u=n[1],s=n[2];return t[0]=i*s-a*u,t[1]=a*o-r*s,t[2]=r*u-i*o,t}var _r=function(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)};!function(){var t=Lr()}();function jr(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function Br(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}!function(){var t,e=(t=new Rr(4),Rr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t)}();function Fr(){var t=new Rr(4);return Rr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Ur(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Dr(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Cr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>Pr?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function qr(t,e){var n=si(t,e);return Math.acos(2*n*n-1)}function Vr(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+o*u+i*c-a*s,t[1]=i*f+o*s+a*u-r*c,t[2]=a*f+o*c+r*s-i*u,t[3]=o*f-r*u-i*s-a*c,t}function zr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=a*s-i*u,t[3]=o*s-r*u,t}function Xr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-a*u,t[1]=i*s+o*u,t[2]=a*s+r*u,t[3]=o*s-i*u,t}function Nr(t,e,n){n*=.5;var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=i*s-r*u,t[2]=a*s+o*u,t[3]=o*s-a*u,t}function Yr(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function Gr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),u=Math.exp(a),s=o>0?u*Math.sin(o)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=u*Math.cos(o),t}function kr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=Math.sqrt(n*n+r*r+i*i),u=o>0?Math.atan2(o,a)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=i*u,t[3]=.5*Math.log(n*n+r*r+i*i+a*a),t}function Wr(t,e,n){return kr(t,e),ui(t,t,n),Gr(t,t),t}function Hr(t,e,n,r){var i,a,o,u,s,c=e[0],f=e[1],h=e[2],l=e[3],d=n[0],m=n[1],v=n[2],g=n[3];return(a=c*d+f*m+h*v+l*g)<0&&(a=-a,d=-d,m=-m,v=-v,g=-g),1-a>Pr?(i=Math.acos(a),o=Math.sin(i),u=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o):(u=1-r,s=r),t[0]=u*c+s*d,t[1]=u*f+s*m,t[2]=u*h+s*v,t[3]=u*l+s*g,t}function Qr(t){var e=Tr(),n=Tr(),r=Tr(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*n),t[1]=i*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*r),t[3]=a*Math.cos(2*Math.PI*r),t}function Zr(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,u=o?1/o:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-i*u,t[3]=a*u,t}function Kr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function $r(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*a+o]-e[3*o+a])*n,t[a]=(e[3*a+i]+e[3*i+a])*n,t[o]=(e[3*o+i]+e[3*i+o])*n}return t}function Jr(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var a=Math.sin(e),o=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=a*s*f-o*u*c,t[1]=o*u*f+a*s*c,t[2]=o*s*c-a*u*f,t[3]=o*s*f+a*u*c,t}function ti(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var ei=function(t){var e=new Rr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},ni=function(t,e,n,r){var i=new Rr(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},ri=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ii=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},ai=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},oi=Vr,ui=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},si=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},ci=function(t,e,n,r){var i=e[0],a=e[1],o=e[2],u=e[3];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t[3]=u+r*(n[3]-u),t},fi=jr,hi=fi,li=Br,di=li,mi=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t},vi=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},gi=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-o)<=Pr*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-u)<=Pr*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=Pr*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=Pr*Math.max(1,Math.abs(a),Math.abs(c))},bi=function(){var t=Lr(),e=Ar(1,0,0),n=Ar(0,1,0);return function(r,i,a){var o=Sr(i,a);return o<-.999999?(Or(t,e,i),_r(t)<1e-6&&Or(t,n,i),Ir(t,t),Dr(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Or(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,mi(r,r))}}(),pi=function(){var t=Fr(),e=Fr();return function(n,r,i,a,o,u){return Hr(t,r,o,u),Hr(e,i,a,u),Hr(n,t,e,2*u*(1-u)),n}}(),Mi=function(){var t,e=(t=new Rr(9),Rr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t);return function(t,n,r,i){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],mi(t,$r(t,e))}}(),yi=n(27),wi=n(26),xi=function(){function t(){this.rotation=0}return t.prototype.init=function(){},t.prototype.update=function(t){this.rotation+=.01,s.identity(t),s.rotateY(t,t,this.rotation)},t}(),Ei=function(){function t(t){this.wrapper=t,yr.loadImages(["panorama_1.jpg","panorama_2.jpg"]).then(this.init.bind(this))}return t.prototype.init=function(t){this.renderer=Er.ImageEffectRenderer.createTemporary(this.wrapper.querySelector(".canvas"),yi),this.renderer.addBuffer(0,wi),this.renderer.getBuffer(0).addImage(t[0],0,!0,!0,!0,!1),this.renderer.getBuffer(0).addImage(t[1],1,!0,!0,!0,!1),this.renderer.getMainBuffer().addImage(this.renderer.getBuffer(0),0),this.panorama=new Mr(this.wrapper,null,{fov:90,imageEffectRendererBuffer:this.renderer.getBuffer(0),rotationController:new xi}),this.panorama.init(),this.renderer.play(),this.tick(0)},t.prototype.tick=function(t){var e=this;requestAnimationFrame(function(t){return e.tick(t)}),this.panorama.getRendererBuffer().setUniformFloat("uMix",2*Math.abs(t/1e4%1-.5))},t}();const Pi=document.querySelector(".panorama");if(Pi){const t=Pi.getAttribute("data-className");switch(t){case"panorama":new wr(Pi);break;case"360-video":new xr(Pi);break;case"advanced":new Ei(Pi);break;default:throw new Error(`Can't find a class with name: ${t}`)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"fromValues",function(){return o}),n.d(e,"copy",function(){return u}),n.d(e,"set",function(){return s}),n.d(e,"add",function(){return c}),n.d(e,"subtract",function(){return f}),n.d(e,"multiply",function(){return h}),n.d(e,"divide",function(){return l}),n.d(e,"ceil",function(){return d}),n.d(e,"floor",function(){return m}),n.d(e,"min",function(){return v}),n.d(e,"max",function(){return g}),n.d(e,"round",function(){return b}),n.d(e,"scale",function(){return p}),n.d(e,"scaleAndAdd",function(){return M}),n.d(e,"distance",function(){return y}),n.d(e,"squaredDistance",function(){return w}),n.d(e,"length",function(){return x}),n.d(e,"squaredLength",function(){return E}),n.d(e,"negate",function(){return P}),n.d(e,"inverse",function(){return R}),n.d(e,"normalize",function(){return T}),n.d(e,"dot",function(){return L}),n.d(e,"cross",function(){return A}),n.d(e,"lerp",function(){return I}),n.d(e,"random",function(){return S}),n.d(e,"transformMat2",function(){return O}),n.d(e,"transformMat2d",function(){return _}),n.d(e,"transformMat3",function(){return j}),n.d(e,"transformMat4",function(){return B}),n.d(e,"rotate",function(){return F}),n.d(e,"angle",function(){return U}),n.d(e,"zero",function(){return D}),n.d(e,"str",function(){return C}),n.d(e,"exactEquals",function(){return q}),n.d(e,"equals",function(){return V}),n.d(e,"len",function(){return X}),n.d(e,"sub",function(){return N}),n.d(e,"mul",function(){return Y}),n.d(e,"div",function(){return G}),n.d(e,"dist",function(){return k}),n.d(e,"sqrDist",function(){return W}),n.d(e,"sqrLen",function(){return H}),n.d(e,"forEach",function(){return Q});var r=n(null);function i(){var t=new r.a(2);return r.a!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t){var e=new r.a(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.a(2);return n[0]=t,n[1]=e,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function m(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function p(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function x(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function P(t,e){return t[0]=-e[0],t[1]=-e[1],t}function R(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function T(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function L(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function I(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function S(t,e){e=e||1;var n=2*r.c()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function O(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function _(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function B(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function F(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),u=Math.cos(r);return t[0]=i*u-a*o+n[0],t[1]=i*o+a*u+n[1],t}function U(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var u=i*i+a*a;u>0&&(u=1/Math.sqrt(u));var s=(n*i+r*a)*o*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function D(t){return t[0]=0,t[1]=0,t}function C(t){return"vec2("+t[0]+", "+t[1]+")"}function q(t,e){return t[0]===e[0]&&t[1]===e[1]}function V(t,e){var n=t[0],i=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=r.b*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.b*Math.max(1,Math.abs(i),Math.abs(o))}var z,X=x,N=f,Y=h,G=l,k=y,W=w,H=E,Q=(z=i(),function(t,e,n,r,i,a){var o,u;for(e||(e=2),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,o=n;o<u;o+=e)z[0]=t[o],z[1]=t[o+1],i(z,z,a),t[o]=z[0],t[o+1]=z[1];return t})},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return o}),n.d(e,"clone",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"fromRotationTranslationValues",function(){return c}),n.d(e,"fromRotationTranslation",function(){return f}),n.d(e,"fromTranslation",function(){return h}),n.d(e,"fromRotation",function(){return l}),n.d(e,"fromMat4",function(){return d}),n.d(e,"copy",function(){return m}),n.d(e,"identity",function(){return v}),n.d(e,"set",function(){return g}),n.d(e,"getReal",function(){return b}),n.d(e,"getDual",function(){return p}),n.d(e,"setReal",function(){return M}),n.d(e,"setDual",function(){return y}),n.d(e,"getTranslation",function(){return w}),n.d(e,"translate",function(){return x}),n.d(e,"rotateX",function(){return E}),n.d(e,"rotateY",function(){return P}),n.d(e,"rotateZ",function(){return R}),n.d(e,"rotateByQuatAppend",function(){return T}),n.d(e,"rotateByQuatPrepend",function(){return L}),n.d(e,"rotateAroundAxis",function(){return A}),n.d(e,"add",function(){return I}),n.d(e,"multiply",function(){return S}),n.d(e,"mul",function(){return O}),n.d(e,"scale",function(){return _}),n.d(e,"dot",function(){return j}),n.d(e,"lerp",function(){return B}),n.d(e,"invert",function(){return F}),n.d(e,"conjugate",function(){return U}),n.d(e,"length",function(){return D}),n.d(e,"len",function(){return C}),n.d(e,"squaredLength",function(){return q}),n.d(e,"sqrLen",function(){return V}),n.d(e,"normalize",function(){return z}),n.d(e,"str",function(){return X}),n.d(e,"exactEquals",function(){return N}),n.d(e,"equals",function(){return Y});var r=n(null),i=n(null),a=n(9);function o(){var t=new r.a(8);return r.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function u(t){var e=new r.a(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function s(t,e,n,i,a,o,u,s){var c=new r.a(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=a,c[5]=o,c[6]=u,c[7]=s,c}function c(t,e,n,i,a,o,u){var s=new r.a(8);s[0]=t,s[1]=e,s[2]=n,s[3]=i;var c=.5*a,f=.5*o,h=.5*u;return s[4]=c*i+f*n-h*e,s[5]=f*i+h*t-c*n,s[6]=h*i+c*e-f*t,s[7]=-c*t-f*e-h*n,s}function f(t,e,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=e[0],u=e[1],s=e[2],c=e[3];return t[0]=o,t[1]=u,t[2]=s,t[3]=c,t[4]=r*c+i*s-a*u,t[5]=i*c+a*o-r*s,t[6]=a*c+r*u-i*o,t[7]=-r*o-i*u-a*s,t}function h(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function d(t,e){var n=i.create();a.getRotation(n,e);var o=new r.a(3);return a.getTranslation(o,e),f(t,n,o),t}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function v(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function g(t,e,n,r,i,a,o,u,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t}var b=i.copy;function p(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var M=i.copy;function y(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function w(t,e){var n=e[4],r=e[5],i=e[6],a=e[7],o=-e[0],u=-e[1],s=-e[2],c=e[3];return t[0]=2*(n*c+a*o+r*s-i*u),t[1]=2*(r*c+a*u+i*o-n*s),t[2]=2*(i*c+a*s+n*u-r*o),t}function x(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=e[4],h=e[5],l=e[6],d=e[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=o*u+i*c-a*s+f,t[5]=o*s+a*u-r*c+h,t[6]=o*c+r*s-i*u+l,t[7]=-r*u-i*s-a*c+d,t}function E(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateX(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function P(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateY(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function R(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateZ(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function T(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],u=e[0],s=e[1],c=e[2],f=e[3];return t[0]=u*o+f*r+s*a-c*i,t[1]=s*o+f*i+c*r-u*a,t[2]=c*o+f*a+u*i-s*r,t[3]=f*o-u*r-s*i-c*a,u=e[4],s=e[5],c=e[6],f=e[7],t[4]=u*o+f*r+s*a-c*i,t[5]=s*o+f*i+c*r-u*a,t[6]=c*o+f*a+u*i-s*r,t[7]=f*o-u*r-s*i-c*a,t}function L(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+o*u+i*c-a*s,t[1]=i*f+o*s+a*u-r*c,t[2]=a*f+o*c+r*s-i*u,t[3]=o*f-r*u-i*s-a*c,u=n[4],s=n[5],c=n[6],f=n[7],t[4]=r*f+o*u+i*c-a*s,t[5]=i*f+o*s+a*u-r*c,t[6]=a*f+o*c+r*s-i*u,t[7]=o*f-r*u-i*s-a*c,t}function A(t,e,n,i){if(Math.abs(i)<r.b)return m(t,e);var a=Math.hypot(n[0],n[1],n[2]);i*=.5;var o=Math.sin(i),u=o*n[0]/a,s=o*n[1]/a,c=o*n[2]/a,f=Math.cos(i),h=e[0],l=e[1],d=e[2],v=e[3];t[0]=h*f+v*u+l*c-d*s,t[1]=l*f+v*s+d*u-h*c,t[2]=d*f+v*c+h*s-l*u,t[3]=v*f-h*u-l*s-d*c;var g=e[4],b=e[5],p=e[6],M=e[7];return t[4]=g*f+M*u+b*c-p*s,t[5]=b*f+M*s+p*u-g*c,t[6]=p*f+M*c+g*s-b*u,t[7]=M*f-g*u-b*s-p*c,t}function I(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function S(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[4],s=n[5],c=n[6],f=n[7],h=e[4],l=e[5],d=e[6],m=e[7],v=n[0],g=n[1],b=n[2],p=n[3];return t[0]=r*p+o*v+i*b-a*g,t[1]=i*p+o*g+a*v-r*b,t[2]=a*p+o*b+r*g-i*v,t[3]=o*p-r*v-i*g-a*b,t[4]=r*f+o*u+i*c-a*s+h*p+m*v+l*b-d*g,t[5]=i*f+o*s+a*u-r*c+l*p+m*g+d*v-h*b,t[6]=a*f+o*c+r*s-i*u+d*p+m*b+h*g-l*v,t[7]=o*f-r*u-i*s-a*c+m*p-h*v-l*g-d*b,t}var O=S;function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var j=i.dot;function B(t,e,n,r){var i=1-r;return j(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function F(t,e){var n=q(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function U(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var D=i.length,C=D,q=i.squaredLength,V=q;function z(t,e){var n=q(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,a=e[2]/n,o=e[3]/n,u=e[4],s=e[5],c=e[6],f=e[7],h=r*u+i*s+a*c+o*f;t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=(u-r*h)/n,t[5]=(s-i*h)/n,t[6]=(c-a*h)/n,t[7]=(f-o*h)/n}return t}function X(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Y(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=e[0],l=e[1],d=e[2],m=e[3],v=e[4],g=e[5],b=e[6],p=e[7];return Math.abs(n-h)<=r.b*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-l)<=r.b*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-d)<=r.b*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-m)<=r.b*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-v)<=r.b*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-g)<=r.b*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-b)<=r.b*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-p)<=r.b*Math.max(1,Math.abs(f),Math.abs(p))}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"copy",function(){return o}),n.d(e,"identity",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"set",function(){return c}),n.d(e,"invert",function(){return f}),n.d(e,"determinant",function(){return h}),n.d(e,"multiply",function(){return l}),n.d(e,"rotate",function(){return d}),n.d(e,"scale",function(){return m}),n.d(e,"translate",function(){return v}),n.d(e,"fromRotation",function(){return g}),n.d(e,"fromScaling",function(){return b}),n.d(e,"fromTranslation",function(){return p}),n.d(e,"str",function(){return M}),n.d(e,"frob",function(){return y}),n.d(e,"add",function(){return w}),n.d(e,"subtract",function(){return x}),n.d(e,"multiplyScalar",function(){return E}),n.d(e,"multiplyScalarAndAdd",function(){return P}),n.d(e,"exactEquals",function(){return R}),n.d(e,"equals",function(){return T}),n.d(e,"mul",function(){return L}),n.d(e,"sub",function(){return A});var r=n(null);function i(){var t=new r.a(6);return r.a!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function a(t){var e=new r.a(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,n,i,a,o){var u=new r.a(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=a,u[5]=o,u}function c(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t}function f(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=n*a-r*i;return s?(s=1/s,t[0]=a*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*u-a*o)*s,t[5]=(r*o-n*u)*s,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function l(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1],h=n[2],l=n[3],d=n[4],m=n[5];return t[0]=r*c+a*f,t[1]=i*c+o*f,t[2]=r*h+a*l,t[3]=i*h+o*l,t[4]=r*d+a*m+u,t[5]=i*d+o*m+s,t}function d(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+a*c,t[1]=i*f+o*c,t[2]=r*-c+a*f,t[3]=i*-c+o*f,t[4]=u,t[5]=s,t}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=a*f,t[3]=o*f,t[4]=u,t[5]=s,t}function v(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=r*c+a*f+u,t[5]=i*c+o*f+s,t}function g(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function p(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function M(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function x(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function P(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function T(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=e[0],f=e[1],h=e[2],l=e[3],d=e[4],m=e[5];return Math.abs(n-c)<=r.b*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-f)<=r.b*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=r.b*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-l)<=r.b*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-d)<=r.b*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-m)<=r.b*Math.max(1,Math.abs(s),Math.abs(m))}var L=l,A=x},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"copy",function(){return o}),n.d(e,"identity",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"set",function(){return c}),n.d(e,"transpose",function(){return f}),n.d(e,"invert",function(){return h}),n.d(e,"adjoint",function(){return l}),n.d(e,"determinant",function(){return d}),n.d(e,"multiply",function(){return m}),n.d(e,"rotate",function(){return v}),n.d(e,"scale",function(){return g}),n.d(e,"fromRotation",function(){return b}),n.d(e,"fromScaling",function(){return p}),n.d(e,"str",function(){return M}),n.d(e,"frob",function(){return y}),n.d(e,"LDU",function(){return w}),n.d(e,"add",function(){return x}),n.d(e,"subtract",function(){return E}),n.d(e,"exactEquals",function(){return P}),n.d(e,"equals",function(){return R}),n.d(e,"multiplyScalar",function(){return T}),n.d(e,"multiplyScalarAndAdd",function(){return L}),n.d(e,"mul",function(){return A}),n.d(e,"sub",function(){return I});var r=n(null);function i(){var t=new r.a(4);return r.a!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function a(t){var e=new r.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n,i){var a=new r.a(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a}function c(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function f(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*a-i*r;return o?(o=1/o,t[0]=a*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function l(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function d(t){return t[0]*t[3]-t[2]*t[1]}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=r*c+a*f,t[3]=i*c+o*f,t}function v(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=r*-u+a*s,t[3]=i*-u+o*s,t}function g(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=i*u,t[2]=a*s,t[3]=o*s,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function p(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3])}function w(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function R(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return Math.abs(n-u)<=r.b*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-s)<=r.b*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=r.b*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-f)<=r.b*Math.max(1,Math.abs(o),Math.abs(f))}function T(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function L(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var A=m,I=E},function(t,e){t.exports="uniform mat4 uInvViewProjection;\r\nuniform float uBarrelDistortion;\r\nuniform float uMix;\r\n\r\nvec2 getEqUV(vec3 rd) {\r\n  vec2 uv = vec2(atan(rd.z, rd.x), asin(rd.y));\r\n  uv *= vec2(0.1591,0.3183);\r\n  uv.y += 0.5;\r\n  return fract(uv);\r\n}\r\nvoid mainImage( out vec4 c, vec2 p ) {\r\n    vec2 uv = vUV0 * 2. - 1.;\r\n    float r2 = dot(uv,uv);\r\n    uv.xy *= 1.0 + uBarrelDistortion * r2;\r\n    vec4 rd = vec4(uv, 1., 1.);\r\n    rd = uInvViewProjection * rd;\r\n    rd.xyz = normalize(rd.xyz);\r\n    vec2 euv = getEqUV(rd.xyz);\r\n    c.xyz = mix( texture(iChannel0, euv).xyz, texture(iChannel1, euv).xyz, smoothstep(.4, .6, uMix));\r\n}\r\n"},function(t,e){t.exports="//\r\n// Description : Array and textureless GLSL 2D simplex noise function.\r\n//      Author : Ian McEwan, Ashima Arts.\r\n//  Maintainer : stegu\r\n//     Lastmod : 20110822 (ijm)\r\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\r\n//               Distributed under the MIT License. See LICENSE file.\r\n//               https://github.com/ashima/webgl-noise\r\n//               https://github.com/stegu/webgl-noise\r\n//\r\n\r\nvec3 mod289(vec3 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec2 mod289(vec2 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec3 permute(vec3 x) {\r\n  return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nfloat snoise(vec2 v)\r\n  {\r\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\r\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\r\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\r\n                      0.024390243902439); // 1.0 / 41.0\r\n// First corner\r\n  vec2 i  = floor(v + dot(v, C.yy) );\r\n  vec2 x0 = v -   i + dot(i, C.xx);\r\n\r\n// Other corners\r\n  vec2 i1;\r\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\r\n  //i1.y = 1.0 - i1.x;\r\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\r\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\r\n  // x1 = x0 - i1 + 1.0 * C.xx ;\r\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\r\n  vec4 x12 = x0.xyxy + C.xxzz;\r\n  x12.xy -= i1;\r\n\r\n// Permutations\r\n  i = mod289(i); // Avoid truncation effects in permutation\r\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\r\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\r\n\r\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\r\n  m = m*m ;\r\n  m = m*m ;\r\n\r\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\r\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\r\n\r\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\r\n  vec3 h = abs(x) - 0.5;\r\n  vec3 ox = floor(x + 0.5);\r\n  vec3 a0 = x - ox;\r\n\r\n// Normalise gradients implicitly by scaling m\r\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\r\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\r\n\r\n// Compute final noise value at P\r\n  vec3 g;\r\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\r\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\r\n  return 130.0 * dot(m, g);\r\n}\r\n\r\nfloat rand(vec2 co)\r\n{\r\n   return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);\r\n}\r\n\r\n\r\nvoid mainImage( out vec4 fragColor, in vec2 fragCoord )\r\n{\r\n\tvec2 uv = fragCoord.xy / iResolution.xy;\r\n    float time = iTime * 2.0;\r\n\r\n    // Create large, incidental noise waves\r\n    float noise = max(0.0, snoise(vec2(time, uv.y * 0.3)) - 0.3) * (1.0 / 0.7);\r\n\r\n    // Offset by smaller, constant noise waves\r\n    noise = noise + (snoise(vec2(time*10.0, uv.y * 2.4)) - 0.5) * 0.15;\r\n\r\n    // Apply the noise as x displacement for every line\r\n    float xpos = uv.x - noise * noise * 0.25;\r\n\tfragColor = texture(iChannel0, vec2(xpos, uv.y));\r\n\r\n    // Mix in some random interference for lines\r\n    fragColor.rgb = mix(fragColor.rgb, vec3(rand(vec2(uv.y * time))), noise * 0.3).rgb;\r\n\r\n    // Apply a line pattern every 4 pixels\r\n    if (floor(mod(fragCoord.y * 0.25, 2.0)) == 0.0)\r\n    {\r\n        fragColor.rgb *= 1.0 - (0.15 * noise);\r\n    }\r\n\r\n    // Shift green/blue channels (using the red channel)\r\n    fragColor.g = mix(fragColor.r, texture(iChannel0, vec2(xpos + noise * 0.05, uv.y)).g, 0.25);\r\n    fragColor.b = mix(fragColor.r, texture(iChannel0, vec2(xpos - noise * 0.05, uv.y)).b, 0.25);\r\n}\r\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.disposed=!1}return t.prototype.isDisposed=function(){return this.disposed},t.prototype.dispose=function(){this.disposed=!0},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28);e.default=r.default},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){"use strict";var r=n(3);e.__esModule=!0,e.default=void 0;var i=r(n(31)),a=r(n(30)),o=r(n(29)),u=r(n(11)),s=function(){Object.defineProperty(this,"press",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"down",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"oldDown",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hit",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"downTime",{configurable:!0,enumerable:!0,writable:!0,value:0})},c=function(t){function e(e){var n;n=t.call(this)||this,Object.defineProperty((0,a.default)(n),"canvas",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"mousePos",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"previousMousePos",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"mouseVelocity",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"normalized",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"mouseClickCallbacks",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty((0,a.default)(n),"buttons",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty((0,a.default)(n),"resetSpeed",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty((0,a.default)(n),"touchMoveListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"endListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"mouseMoveListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"onMouseStart",{configurable:!0,enumerable:!0,writable:!0,value:function(t){t.preventDefault();var e=t instanceof TouchEvent;n.resetSpeed=!0,n.buttons[e?0:t.which-1].press=!0,n.setMouse(e?t.targetTouches[0]:t);for(var r=0;r<n.mouseClickCallbacks.length;r++)n.mouseClickCallbacks[r].call((0,a.default)(n))}}),n.canvas=e;for(var r=0;r<3;r++)n.buttons.push(new s);return n.touchMoveListener=function(t){return n.setMouse(t.targetTouches[0])},n.mouseMoveListener=function(t){return n.setMouse(t)},n.endListener=function(){n.buttons[0].press=!1},n.canvas.addEventListener("touchstart",n.onMouseStart,!1),n.canvas.addEventListener("touchmove",n.touchMoveListener,!1),n.canvas.addEventListener("touchend",n.endListener,!1),n.canvas.addEventListener("touchcancel",n.endListener,!1),n.canvas.addEventListener("mousedown",n.onMouseStart,!1),n.canvas.addEventListener("mousemove",n.mouseMoveListener,!1),n.canvas.addEventListener("mouseup",n.endListener,!1),n.canvas.addEventListener("mousecancel",n.endListener,!1),n.canvas.addEventListener("mouseout",n.endListener,!1),n}(0,i.default)(e,t);var n=e.prototype;return n.setMouse=function(t){this.mousePos[0]=t.pageX,this.mousePos[1]=t.pageY},n.getNormalizedVelocity=function(){return this.mouseVelocity},n.getMouseDown=function(){return this.buttons[0].press},n.update=function(){this.normalized[0]=this.mousePos[0]/this.canvas.clientWidth,this.normalized[1]=this.mousePos[1]/this.canvas.clientHeight,this.resetSpeed?(this.resetSpeed=!1,this.mouseVelocity[0]=0,this.mouseVelocity[1]=0):(this.mouseVelocity[0]=this.normalized[0]-this.previousMousePos[0],this.mouseVelocity[1]=this.normalized[1]-this.previousMousePos[1]),this.previousMousePos[0]=this.normalized[0],this.previousMousePos[1]=this.normalized[1];for(var t=0;t<3;t++){var e=this.buttons[t];e.hit=!1,e.down=!1,this.buttons[t].press?(0===e.downTime&&(e.down=!0),e.downTime++):(e.hit=e.downTime<15&&e.oldDown,e.downTime=0),e.oldDown=e.press}},n.dispose=function(){this.isDisposed()||(this.canvas&&(this.canvas.removeEventListener("touchstart",this.onMouseStart,!1),this.canvas.removeEventListener("touchmove",this.touchMoveListener,!1),this.canvas.removeEventListener("touchend",this.endListener,!1),this.canvas.removeEventListener("touchcancel",this.endListener,!1),this.canvas.removeEventListener("mousedown",this.onMouseStart,!1),this.canvas.removeEventListener("mousemove",this.mouseMoveListener,!1),this.canvas.removeEventListener("mouseend",this.endListener,!1),this.canvas.removeEventListener("mousecancel",this.endListener,!1),this.canvas.removeEventListener("mouseout",this.endListener,!1)),this.normalized=null,this.mouseVelocity=null,this.previousMousePos=null),t.prototype.dispose.call(this)},e}(o.default),f=function(t){function e(e,n,r,i,o,s){var f;return void 0===r&&(r=70),void 0===i&&(i=.95),void 0===o&&(o=.75),void 0===s&&(s=.25),f=t.call(this)||this,Object.defineProperty((0,a.default)(f),"imageEffectRender",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"mouseListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"rotateX",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateY",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateSpeedX",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateSpeedY",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"inertia",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"smoothness",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"fovV",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"barrelDistortion",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"isReady",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty((0,a.default)(f),"animationLoop",{configurable:!0,enumerable:!0,writable:!0,value:!1}),f.inertia=i,f.fovV=r,f.smoothness=o,f.barrelDistortion=s,f.imageEffectRender=u.default.createTemporary(e,f.getShader(),!1),f.imageEffectRender.addImage(n,0,!1,!0,!0),f.isReady=!0,f.mouseListener=new c(f.imageEffectRender.getCanvas()),f}(0,i.default)(e,t);var n=e.prototype;return n.init=function(){this.play()},n.play=function(){this.animationLoop=!0,this.update()},n.pause=function(){this.animationLoop=!1},n.updateSize=function(){this.imageEffectRender.updateSize()},n.updateImage=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),this.imageEffectRender.updateImage(t,0,e,n,!0)},n.update=function(){var t=this;if(!this.isDisposed()&&this.animationLoop){if(this.isReady){this.mouseListener.update();var e=this.imageEffectRender.getCanvas(),n=e.width/e.height,r=Math.PI/180,i=.5/Math.tan(this.fovV*(.5*r)),a=Math.atan2(.5*n,i)*(360/Math.PI);if(this.mouseListener.getMouseDown()){var o=this.mouseListener.getNormalizedVelocity();this.rotateSpeedX=this.lerp(-o[0]*a,this.rotateSpeedX,this.smoothness),this.rotateSpeedY=this.lerp(o[1]*this.fovV,this.rotateSpeedY,this.smoothness)}else this.rotateSpeedX*=this.inertia,this.rotateSpeedY*=this.inertia;this.rotateX+=this.rotateSpeedX,this.rotateY+=this.rotateSpeedY,this.rotateY>90&&(this.rotateY=90),this.rotateY<-90&&(this.rotateY=-90),this.imageEffectRender.setUniformVec2("uRotation",this.rotateX*r,this.rotateY*r);var u=Math.tan(.5*this.fovV),s=u*n;this.imageEffectRender.setUniformVec3("uFrustumCorner",-s,u,1),this.imageEffectRender.setUniformFloat("uBarrelDistortion",this.barrelDistortion),this.imageEffectRender.setUniformFloat("uAspect",n),this.imageEffectRender.draw()}window.requestAnimationFrame(function(){return t.update()})}},n.getShader=function(){return"\n      uniform vec2 uRotation;\n\t\t\tuniform float uAspect;\n\t\t\tuniform vec3 uFrustumCorner;\n      uniform float uBarrelDistortion;\n\t\t\t\n\t\t\tvec2 getEqUV(vec3 rd)\n      {\n        vec2 uv = vec2(atan(rd.z, rd.x), asin(rd.y));\n\t\t\t\tuv *= vec2(0.1591,0.3183);\n\t\t\t\tuv.y += 0.5;\n\t\t\t\treturn fract(uv);\n      }\n      mat2 getMatrix(float a)\n\t\t\t{\n\t\t\t\tfloat s = sin(a);\n\t\t\t\tfloat c = cos(a);\n\t\t\t\treturn mat2(c, -s, s, c);\n\t\t\t}\n      void mainImage( out vec4 c, vec2 p )\n      {\n        vec2 uv = vUV0 * 2. - 1.;\n        float r2 = dot(uv,uv);\n        uv.xy *= 1.0 + uBarrelDistortion * r2;\n        vec3 rd = vec3(uv, 1.) * uFrustumCorner;\n        rd = normalize(rd);\n        rd.yz *= getMatrix(-uRotation.y);\n        rd.xz *= getMatrix(uRotation.x);\n        c.xyz = texture(iChannel0, getEqUV(rd)).xyz;\n        c.w = 1.0;\n      }\n    "},n.lerp=function(t,e,n){return(1-n)*t+n*e},n.dispose=function(){this.isDisposed()||(this.mouseListener.dispose(),u.default.releaseTemporary(this.imageEffectRender)),t.prototype.dispose.call(this)},e}(o.default);e.default=f},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"fromValues",function(){return o}),n.d(e,"copy",function(){return u}),n.d(e,"set",function(){return s}),n.d(e,"add",function(){return c}),n.d(e,"subtract",function(){return f}),n.d(e,"multiply",function(){return h}),n.d(e,"divide",function(){return l}),n.d(e,"ceil",function(){return d}),n.d(e,"floor",function(){return m}),n.d(e,"min",function(){return v}),n.d(e,"max",function(){return g}),n.d(e,"round",function(){return b}),n.d(e,"scale",function(){return p}),n.d(e,"scaleAndAdd",function(){return M}),n.d(e,"distance",function(){return y}),n.d(e,"squaredDistance",function(){return w}),n.d(e,"length",function(){return x}),n.d(e,"squaredLength",function(){return E}),n.d(e,"negate",function(){return P}),n.d(e,"inverse",function(){return R}),n.d(e,"normalize",function(){return T}),n.d(e,"dot",function(){return L}),n.d(e,"cross",function(){return A}),n.d(e,"lerp",function(){return I}),n.d(e,"random",function(){return S}),n.d(e,"transformMat2",function(){return O}),n.d(e,"transformMat2d",function(){return _}),n.d(e,"transformMat3",function(){return j}),n.d(e,"transformMat4",function(){return B}),n.d(e,"rotate",function(){return F}),n.d(e,"angle",function(){return U}),n.d(e,"zero",function(){return D}),n.d(e,"str",function(){return C}),n.d(e,"exactEquals",function(){return q}),n.d(e,"equals",function(){return V}),n.d(e,"len",function(){return X}),n.d(e,"sub",function(){return N}),n.d(e,"mul",function(){return Y}),n.d(e,"div",function(){return G}),n.d(e,"dist",function(){return k}),n.d(e,"sqrDist",function(){return W}),n.d(e,"sqrLen",function(){return H}),n.d(e,"forEach",function(){return Q});var r=n(null);function i(){var t=new r.a(2);return r.a!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t){var e=new r.a(2);return e[0]=t[0],e[1]=t[1],e}function o(t,e){var n=new r.a(2);return n[0]=t,n[1]=e,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function m(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function b(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function p(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function y(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function x(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function P(t,e){return t[0]=-e[0],t[1]=-e[1],t}function R(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function T(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function L(t,e){return t[0]*e[0]+t[1]*e[1]}function A(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function I(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function S(t,e){e=e||1;var n=2*r.b()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function O(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function _(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function B(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function F(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),u=Math.cos(r);return t[0]=i*u-a*o+n[0],t[1]=i*o+a*u+n[1],t}function U(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var u=i*i+a*a;u>0&&(u=1/Math.sqrt(u));var s=(n*i+r*a)*o*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function D(t){return t[0]=0,t[1]=0,t}function C(t){return"vec2("+t[0]+", "+t[1]+")"}function q(t,e){return t[0]===e[0]&&t[1]===e[1]}function V(t,e){var n=t[0],i=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=r.c*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.c*Math.max(1,Math.abs(i),Math.abs(o))}var z,X=x,N=f,Y=h,G=l,k=y,W=w,H=E,Q=(z=i(),function(t,e,n,r,i,a){var o,u;for(e||(e=2),n||(n=0),u=r?Math.min(r*e+n,t.length):t.length,o=n;o<u;o+=e)z[0]=t[o],z[1]=t[o+1],i(z,z,a),t[o]=z[0],t[o+1]=z[1];return t})},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return o}),n.d(e,"clone",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"fromRotationTranslationValues",function(){return c}),n.d(e,"fromRotationTranslation",function(){return f}),n.d(e,"fromTranslation",function(){return h}),n.d(e,"fromRotation",function(){return l}),n.d(e,"fromMat4",function(){return d}),n.d(e,"copy",function(){return m}),n.d(e,"identity",function(){return v}),n.d(e,"set",function(){return g}),n.d(e,"getReal",function(){return b}),n.d(e,"getDual",function(){return p}),n.d(e,"setReal",function(){return M}),n.d(e,"setDual",function(){return y}),n.d(e,"getTranslation",function(){return w}),n.d(e,"translate",function(){return x}),n.d(e,"rotateX",function(){return E}),n.d(e,"rotateY",function(){return P}),n.d(e,"rotateZ",function(){return R}),n.d(e,"rotateByQuatAppend",function(){return T}),n.d(e,"rotateByQuatPrepend",function(){return L}),n.d(e,"rotateAroundAxis",function(){return A}),n.d(e,"add",function(){return I}),n.d(e,"multiply",function(){return S}),n.d(e,"mul",function(){return O}),n.d(e,"scale",function(){return _}),n.d(e,"dot",function(){return j}),n.d(e,"lerp",function(){return B}),n.d(e,"invert",function(){return F}),n.d(e,"conjugate",function(){return U}),n.d(e,"length",function(){return D}),n.d(e,"len",function(){return C}),n.d(e,"squaredLength",function(){return q}),n.d(e,"sqrLen",function(){return V}),n.d(e,"normalize",function(){return z}),n.d(e,"str",function(){return X}),n.d(e,"exactEquals",function(){return N}),n.d(e,"equals",function(){return Y});var r=n(null),i=n(null),a=n(null);function o(){var t=new r.a(8);return r.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function u(t){var e=new r.a(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function s(t,e,n,i,a,o,u,s){var c=new r.a(8);return c[0]=t,c[1]=e,c[2]=n,c[3]=i,c[4]=a,c[5]=o,c[6]=u,c[7]=s,c}function c(t,e,n,i,a,o,u){var s=new r.a(8);s[0]=t,s[1]=e,s[2]=n,s[3]=i;var c=.5*a,f=.5*o,h=.5*u;return s[4]=c*i+f*n-h*e,s[5]=f*i+h*t-c*n,s[6]=h*i+c*e-f*t,s[7]=-c*t-f*e-h*n,s}function f(t,e,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=e[0],u=e[1],s=e[2],c=e[3];return t[0]=o,t[1]=u,t[2]=s,t[3]=c,t[4]=r*c+i*s-a*u,t[5]=i*c+a*o-r*s,t[6]=a*c+r*u-i*o,t[7]=-r*o-i*u-a*s,t}function h(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function l(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function d(t,e){var n=i.create();a.getRotation(n,e);var o=new r.a(3);return a.getTranslation(o,e),f(t,n,o),t}function m(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function v(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function g(t,e,n,r,i,a,o,u,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=s,t}var b=i.copy;function p(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var M=i.copy;function y(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function w(t,e){var n=e[4],r=e[5],i=e[6],a=e[7],o=-e[0],u=-e[1],s=-e[2],c=e[3];return t[0]=2*(n*c+a*o+r*s-i*u),t[1]=2*(r*c+a*u+i*o-n*s),t[2]=2*(i*c+a*s+n*u-r*o),t}function x(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=.5*n[0],s=.5*n[1],c=.5*n[2],f=e[4],h=e[5],l=e[6],d=e[7];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=o*u+i*c-a*s+f,t[5]=o*s+a*u-r*c+h,t[6]=o*c+r*s-i*u+l,t[7]=-r*u-i*s-a*c+d,t}function E(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateX(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function P(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateY(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function R(t,e,n){var r=-e[0],a=-e[1],o=-e[2],u=e[3],s=e[4],c=e[5],f=e[6],h=e[7],l=s*u+h*r+c*o-f*a,d=c*u+h*a+f*r-s*o,m=f*u+h*o+s*a-c*r,v=h*u-s*r-c*a-f*o;return i.rotateZ(t,e,n),r=t[0],a=t[1],o=t[2],u=t[3],t[4]=l*u+v*r+d*o-m*a,t[5]=d*u+v*a+m*r-l*o,t[6]=m*u+v*o+l*a-d*r,t[7]=v*u-l*r-d*a-m*o,t}function T(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],u=e[0],s=e[1],c=e[2],f=e[3];return t[0]=u*o+f*r+s*a-c*i,t[1]=s*o+f*i+c*r-u*a,t[2]=c*o+f*a+u*i-s*r,t[3]=f*o-u*r-s*i-c*a,u=e[4],s=e[5],c=e[6],f=e[7],t[4]=u*o+f*r+s*a-c*i,t[5]=s*o+f*i+c*r-u*a,t[6]=c*o+f*a+u*i-s*r,t[7]=f*o-u*r-s*i-c*a,t}function L(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+o*u+i*c-a*s,t[1]=i*f+o*s+a*u-r*c,t[2]=a*f+o*c+r*s-i*u,t[3]=o*f-r*u-i*s-a*c,u=n[4],s=n[5],c=n[6],f=n[7],t[4]=r*f+o*u+i*c-a*s,t[5]=i*f+o*s+a*u-r*c,t[6]=a*f+o*c+r*s-i*u,t[7]=o*f-r*u-i*s-a*c,t}function A(t,e,n,i){if(Math.abs(i)<r.c)return m(t,e);var a=Math.hypot(n[0],n[1],n[2]);i*=.5;var o=Math.sin(i),u=o*n[0]/a,s=o*n[1]/a,c=o*n[2]/a,f=Math.cos(i),h=e[0],l=e[1],d=e[2],v=e[3];t[0]=h*f+v*u+l*c-d*s,t[1]=l*f+v*s+d*u-h*c,t[2]=d*f+v*c+h*s-l*u,t[3]=v*f-h*u-l*s-d*c;var g=e[4],b=e[5],p=e[6],M=e[7];return t[4]=g*f+M*u+b*c-p*s,t[5]=b*f+M*s+p*u-g*c,t[6]=p*f+M*c+g*s-b*u,t[7]=M*f-g*u-b*s-p*c,t}function I(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function S(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[4],s=n[5],c=n[6],f=n[7],h=e[4],l=e[5],d=e[6],m=e[7],v=n[0],g=n[1],b=n[2],p=n[3];return t[0]=r*p+o*v+i*b-a*g,t[1]=i*p+o*g+a*v-r*b,t[2]=a*p+o*b+r*g-i*v,t[3]=o*p-r*v-i*g-a*b,t[4]=r*f+o*u+i*c-a*s+h*p+m*v+l*b-d*g,t[5]=i*f+o*s+a*u-r*c+l*p+m*g+d*v-h*b,t[6]=a*f+o*c+r*s-i*u+d*p+m*b+h*g-l*v,t[7]=o*f-r*u-i*s-a*c+m*p-h*v-l*g-d*b,t}var O=S;function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var j=i.dot;function B(t,e,n,r){var i=1-r;return j(e,n)<0&&(r=-r),t[0]=e[0]*i+n[0]*r,t[1]=e[1]*i+n[1]*r,t[2]=e[2]*i+n[2]*r,t[3]=e[3]*i+n[3]*r,t[4]=e[4]*i+n[4]*r,t[5]=e[5]*i+n[5]*r,t[6]=e[6]*i+n[6]*r,t[7]=e[7]*i+n[7]*r,t}function F(t,e){var n=q(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function U(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var D=i.length,C=D,q=i.squaredLength,V=q;function z(t,e){var n=q(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,i=e[1]/n,a=e[2]/n,o=e[3]/n,u=e[4],s=e[5],c=e[6],f=e[7],h=r*u+i*s+a*c+o*f;t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=(u-r*h)/n,t[5]=(s-i*h)/n,t[6]=(c-a*h)/n,t[7]=(f-o*h)/n}return t}function X(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function Y(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=e[0],l=e[1],d=e[2],m=e[3],v=e[4],g=e[5],b=e[6],p=e[7];return Math.abs(n-h)<=r.c*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-l)<=r.c*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-d)<=r.c*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-m)<=r.c*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-v)<=r.c*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-g)<=r.c*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-b)<=r.c*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(f-p)<=r.c*Math.max(1,Math.abs(f),Math.abs(p))}},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"copy",function(){return o}),n.d(e,"identity",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"set",function(){return c}),n.d(e,"invert",function(){return f}),n.d(e,"determinant",function(){return h}),n.d(e,"multiply",function(){return l}),n.d(e,"rotate",function(){return d}),n.d(e,"scale",function(){return m}),n.d(e,"translate",function(){return v}),n.d(e,"fromRotation",function(){return g}),n.d(e,"fromScaling",function(){return b}),n.d(e,"fromTranslation",function(){return p}),n.d(e,"str",function(){return M}),n.d(e,"frob",function(){return y}),n.d(e,"add",function(){return w}),n.d(e,"subtract",function(){return x}),n.d(e,"multiplyScalar",function(){return E}),n.d(e,"multiplyScalarAndAdd",function(){return P}),n.d(e,"exactEquals",function(){return R}),n.d(e,"equals",function(){return T}),n.d(e,"mul",function(){return L}),n.d(e,"sub",function(){return A});var r=n(null);function i(){var t=new r.a(6);return r.a!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function a(t){var e=new r.a(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,n,i,a,o){var u=new r.a(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=i,u[4]=a,u[5]=o,u}function c(t,e,n,r,i,a,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t}function f(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],u=e[5],s=n*a-r*i;return s?(s=1/s,t[0]=a*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*u-a*o)*s,t[5]=(r*o-n*u)*s,t):null}function h(t){return t[0]*t[3]-t[1]*t[2]}function l(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1],h=n[2],l=n[3],d=n[4],m=n[5];return t[0]=r*c+a*f,t[1]=i*c+o*f,t[2]=r*h+a*l,t[3]=i*h+o*l,t[4]=r*d+a*m+u,t[5]=i*d+o*m+s,t}function d(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+a*c,t[1]=i*f+o*c,t[2]=r*-c+a*f,t[3]=i*-c+o*f,t[4]=u,t[5]=s,t}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=a*f,t[3]=o*f,t[4]=u,t[5]=s,t}function v(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=r*c+a*f+u,t[5]=i*c+o*f+s,t}function g(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function b(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function p(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function M(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function x(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function P(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function T(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=t[4],s=t[5],c=e[0],f=e[1],h=e[2],l=e[3],d=e[4],m=e[5];return Math.abs(n-c)<=r.c*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-f)<=r.c*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=r.c*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-l)<=r.c*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-d)<=r.c*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-m)<=r.c*Math.max(1,Math.abs(s),Math.abs(m))}var L=l,A=x},function(t,e,n){"use strict";n.r(e),n.d(e,"create",function(){return i}),n.d(e,"clone",function(){return a}),n.d(e,"copy",function(){return o}),n.d(e,"identity",function(){return u}),n.d(e,"fromValues",function(){return s}),n.d(e,"set",function(){return c}),n.d(e,"transpose",function(){return f}),n.d(e,"invert",function(){return h}),n.d(e,"adjoint",function(){return l}),n.d(e,"determinant",function(){return d}),n.d(e,"multiply",function(){return m}),n.d(e,"rotate",function(){return v}),n.d(e,"scale",function(){return g}),n.d(e,"fromRotation",function(){return b}),n.d(e,"fromScaling",function(){return p}),n.d(e,"str",function(){return M}),n.d(e,"frob",function(){return y}),n.d(e,"LDU",function(){return w}),n.d(e,"add",function(){return x}),n.d(e,"subtract",function(){return E}),n.d(e,"exactEquals",function(){return P}),n.d(e,"equals",function(){return R}),n.d(e,"multiplyScalar",function(){return T}),n.d(e,"multiplyScalarAndAdd",function(){return L}),n.d(e,"mul",function(){return A}),n.d(e,"sub",function(){return I});var r=n(null);function i(){var t=new r.a(4);return r.a!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function a(t){var e=new r.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n,i){var a=new r.a(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=i,a}function c(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function f(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*a-i*r;return o?(o=1/o,t[0]=a*o,t[1]=-r*o,t[2]=-i*o,t[3]=n*o,t):null}function l(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function d(t){return t[0]*t[3]-t[2]*t[1]}function m(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=r*c+a*f,t[3]=i*c+o*f,t}function v(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=r*-u+a*s,t[3]=i*-u+o*s,t}function g(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=i*u,t[2]=a*s,t[3]=o*s,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function p(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function y(t){return Math.hypot(t[0],t[1],t[2],t[3])}function w(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function R(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return Math.abs(n-u)<=r.c*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(i-s)<=r.c*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-c)<=r.c*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-f)<=r.c*Math.max(1,Math.abs(o),Math.abs(f))}function T(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function L(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}var A=m,I=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.disposed=!1}return t.prototype.isDisposed=function(){return this.disposed},t.prototype.dispose=function(){this.disposed=!0},t}();e.default=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){t.exports=n(2).document&&document.documentElement},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(2),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e,n){var r=n(14),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(14),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(15),i=n(44),a=n(43);t.exports=function(t){return function(e,n,o){var u,s=r(e),c=i(s.length),f=a(o,c);if(t&&n!=n){for(;c>f;)if((u=s[f++])!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(47);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(49),i=n(15),a=n(45)(!1),o=n(13)("IE_PROTO");t.exports=function(t,e){var n,u=i(t),s=0,c=[];for(n in u)n!=o&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~a(c,n)||c.push(n));return c}},function(t,e,n){var r=n(50),i=n(12);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(6),i=n(5),a=n(51);t.exports=n(0)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),u=o.length,s=0;u>s;)r.f(t,n=o[s++],e[n]);return t}},function(t,e,n){var r=n(5),i=n(52),a=n(12),o=n(13)("IE_PROTO"),u=function(){},s=function(){var t,e=n(16)("iframe"),r=a.length;for(e.style.display="none",n(40).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s.prototype[a[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(u.prototype=r(t),n=new u,u.prototype=null,n[o]=t):n=s(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(18);r(r.S,"Object",{create:n(53)})},function(t,e,n){n(54);var r=n(7).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){t.exports=n(55)},function(t,e,n){var r=n(56);t.exports=function(t,e){t.prototype=r(e.prototype),t.prototype.constructor=t,t.__proto__=e}},function(t,e,n){"use strict";var r=n(8);e.__esModule=!0,e.default=void 0;var i=r(n(57)),a=r(n(39)),o=r(n(1)),u=r(n(19)),s=function(){Object.defineProperty(this,"press",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"down",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"oldDown",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hit",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty(this,"downTime",{configurable:!0,enumerable:!0,writable:!0,value:0})},c=function(t){function e(e){var n;n=t.call(this)||this,Object.defineProperty((0,a.default)(n),"canvas",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"mousePos",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"previousMousePos",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"mouseVelocity",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"normalized",{configurable:!0,enumerable:!0,writable:!0,value:new Float32Array([0,0])}),Object.defineProperty((0,a.default)(n),"mouseClickCallbacks",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty((0,a.default)(n),"buttons",{configurable:!0,enumerable:!0,writable:!0,value:[]}),Object.defineProperty((0,a.default)(n),"resetSpeed",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty((0,a.default)(n),"touchMoveListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"endListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"mouseMoveListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(n),"onMouseStart",{configurable:!0,enumerable:!0,writable:!0,value:function(t){t.preventDefault();var e=t instanceof TouchEvent;n.resetSpeed=!0,n.buttons[e?0:t.which-1].press=!0,n.setMouse(e?t.targetTouches[0]:t);for(var r=0;r<n.mouseClickCallbacks.length;r++)n.mouseClickCallbacks[r].call((0,a.default)(n))}}),n.canvas=e;for(var r=0;r<3;r++)n.buttons.push(new s);return n.touchMoveListener=function(t){return n.setMouse(t.targetTouches[0])},n.mouseMoveListener=function(t){return n.setMouse(t)},n.endListener=function(){n.buttons[0].press=!1},n.canvas.addEventListener("touchstart",n.onMouseStart,!1),n.canvas.addEventListener("touchmove",n.touchMoveListener,!1),n.canvas.addEventListener("touchend",n.endListener,!1),n.canvas.addEventListener("touchcancel",n.endListener,!1),n.canvas.addEventListener("mousedown",n.onMouseStart,!1),n.canvas.addEventListener("mousemove",n.mouseMoveListener,!1),n.canvas.addEventListener("mouseup",n.endListener,!1),n.canvas.addEventListener("mousecancel",n.endListener,!1),n.canvas.addEventListener("mouseout",n.endListener,!1),n}(0,i.default)(e,t);var n=e.prototype;return n.setMouse=function(t){this.mousePos[0]=t.pageX,this.mousePos[1]=t.pageY},n.getNormalizedVelocity=function(){return this.mouseVelocity},n.getMouseDown=function(){return this.buttons[0].press},n.update=function(){this.normalized[0]=this.mousePos[0]/this.canvas.clientWidth,this.normalized[1]=this.mousePos[1]/this.canvas.clientHeight,this.resetSpeed?(this.resetSpeed=!1,this.mouseVelocity[0]=0,this.mouseVelocity[1]=0):(this.mouseVelocity[0]=this.normalized[0]-this.previousMousePos[0],this.mouseVelocity[1]=this.normalized[1]-this.previousMousePos[1]),this.previousMousePos[0]=this.normalized[0],this.previousMousePos[1]=this.normalized[1];for(var t=0;t<3;t++){var e=this.buttons[t];e.hit=!1,e.down=!1,this.buttons[t].press?(0===e.downTime&&(e.down=!0),e.downTime++):(e.hit=e.downTime<15&&e.oldDown,e.downTime=0),e.oldDown=e.press}},n.dispose=function(){this.isDisposed()||(this.canvas&&(this.canvas.removeEventListener("touchstart",this.onMouseStart,!1),this.canvas.removeEventListener("touchmove",this.touchMoveListener,!1),this.canvas.removeEventListener("touchend",this.endListener,!1),this.canvas.removeEventListener("touchcancel",this.endListener,!1),this.canvas.removeEventListener("mousedown",this.onMouseStart,!1),this.canvas.removeEventListener("mousemove",this.mouseMoveListener,!1),this.canvas.removeEventListener("mouseend",this.endListener,!1),this.canvas.removeEventListener("mousecancel",this.endListener,!1),this.canvas.removeEventListener("mouseout",this.endListener,!1)),this.normalized=null,this.mouseVelocity=null,this.previousMousePos=null),t.prototype.dispose.call(this)},e}(o.default),f=function(t){function e(e,n,r,i,o,s){var f;return void 0===r&&(r=70),void 0===i&&(i=.95),void 0===o&&(o=.75),void 0===s&&(s=.25),f=t.call(this)||this,Object.defineProperty((0,a.default)(f),"imageEffectRender",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"mouseListener",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"rotateX",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateY",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateSpeedX",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"rotateSpeedY",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"inertia",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"smoothness",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"fovV",{configurable:!0,enumerable:!0,writable:!0,value:void 0}),Object.defineProperty((0,a.default)(f),"barrelDistortion",{configurable:!0,enumerable:!0,writable:!0,value:0}),Object.defineProperty((0,a.default)(f),"isReady",{configurable:!0,enumerable:!0,writable:!0,value:!1}),Object.defineProperty((0,a.default)(f),"animationLoop",{configurable:!0,enumerable:!0,writable:!0,value:!1}),f.inertia=i,f.fovV=r,f.smoothness=o,f.barrelDistortion=s,f.imageEffectRender=u.default.createTemporary(e,f.getShader(),!1),f.imageEffectRender.addImage(n,0,!1,!0,!0),f.isReady=!0,f.mouseListener=new c(f.imageEffectRender.getCanvas()),f}(0,i.default)(e,t);var n=e.prototype;return n.init=function(){this.play()},n.play=function(){this.animationLoop=!0,this.update()},n.pause=function(){this.animationLoop=!1},n.updateSize=function(){this.imageEffectRender.updateSize()},n.updateImage=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),this.imageEffectRender.updateImage(t,0,e,n,!0)},n.update=function(){var t=this;if(!this.isDisposed()&&this.animationLoop){if(this.isReady){this.mouseListener.update();var e=this.imageEffectRender.getCanvas(),n=e.width/e.height,r=Math.PI/180,i=.5/Math.tan(this.fovV*(.5*r)),a=Math.atan2(.5*n,i)*(360/Math.PI);if(this.mouseListener.getMouseDown()){var o=this.mouseListener.getNormalizedVelocity();this.rotateSpeedX=this.lerp(-o[0]*a,this.rotateSpeedX,this.smoothness),this.rotateSpeedY=this.lerp(o[1]*this.fovV,this.rotateSpeedY,this.smoothness)}else this.rotateSpeedX*=this.inertia,this.rotateSpeedY*=this.inertia;this.rotateX+=this.rotateSpeedX,this.rotateY+=this.rotateSpeedY,this.rotateY>90&&(this.rotateY=90),this.rotateY<-90&&(this.rotateY=-90),this.imageEffectRender.setUniformVec2("uRotation",this.rotateX*r,this.rotateY*r);var u=Math.tan(.5*this.fovV),s=u*n;this.imageEffectRender.setUniformVec3("uFrustumCorner",-s,u,1),this.imageEffectRender.setUniformFloat("uBarrelDistortion",this.barrelDistortion),this.imageEffectRender.setUniformFloat("uAspect",n),this.imageEffectRender.draw()}window.requestAnimationFrame(function(){return t.update()})}},n.getShader=function(){return"\n      uniform vec2 uRotation;\n\t\t\tuniform float uAspect;\n\t\t\tuniform vec3 uFrustumCorner;\n      uniform float uBarrelDistortion;\n\t\t\t\n\t\t\tvec2 getEqUV(vec3 rd)\n      {\n        vec2 uv = vec2(atan(rd.z, rd.x), asin(rd.y));\n\t\t\t\tuv *= vec2(0.1591,0.3183);\n\t\t\t\tuv.y += 0.5;\n\t\t\t\treturn fract(uv);\n      }\n      mat2 getMatrix(float a)\n\t\t\t{\n\t\t\t\tfloat s = sin(a);\n\t\t\t\tfloat c = cos(a);\n\t\t\t\treturn mat2(c, -s, s, c);\n\t\t\t}\n      void mainImage( out vec4 c, vec2 p )\n      {\n        vec2 uv = vUV0 * 2. - 1.;\n        float r2 = dot(uv,uv);\n        uv.xy *= 1.0 + uBarrelDistortion * r2;\n        vec3 rd = vec3(uv, 1.) * uFrustumCorner;\n        rd = normalize(rd);\n        rd.yz *= getMatrix(-uRotation.y);\n        rd.xz *= getMatrix(uRotation.x);\n        c.xyz = texture(iChannel0, getEqUV(rd)).xyz;\n        c.w = 1.0;\n      }\n    "},n.lerp=function(t,e,n){return(1-n)*t+n*e},n.dispose=function(){this.isDisposed()||(this.mouseListener.dispose(),u.default.releaseTemporary(this.imageEffectRender)),t.prototype.dispose.call(this)},e}(o.default);e.default=f},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){t.exports=!n(0)&&!n(17)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),i=n(59);t.exports=n(0)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(63);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(18);r(r.S+r.F*!n(0),"Object",{defineProperty:n(6).f})},function(t,e,n){n(65);var r=n(7).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){t.exports=n(66)},function(t,e,n){var r=n(67);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}]);